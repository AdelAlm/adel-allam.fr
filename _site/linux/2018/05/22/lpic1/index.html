<!DOCTYPE html>
<html lang="en-us">

  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      lpic-1 &middot; Adel ALLAM
    
  </title>

  
  <link rel="canonical" href="http://localhost:4000/linux/2018/05/22/lpic1/">
  

  <link rel="stylesheet" href="http://localhost:4000/public/css/poole.css">
  <link rel="stylesheet" href="http://localhost:4000/public/css/syntax.css">
  <link rel="stylesheet" href="http://localhost:4000/public/css/lanyon.css">

  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="http://localhost:4000/public/favicon.ico">

  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://localhost:4000/atom.xml">
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox" checked>

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div style="font-size: 2em;" class="sidebar-item">
    <p>Blog-notes</p>
  </div>

  <hr class="sidebar-separator">

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">home</a>

    <!-- categories links -->
    
      
        
          
        
      
        
          
        
      
        
      
        
          
            <a class="sidebar-nav-item-sub sidebar-nav-item" href="/category/ctf/">> ctf</a>
          
        
      
        
          
        
      
        
          
            <a class="sidebar-nav-item-sub sidebar-nav-item" href="/category/linux/">> linux</a>
          
        
      
        
          
            <a class="sidebar-nav-item-sub sidebar-nav-item" href="/category/network/">> network</a>
          
        
      
        
          
            <a class="sidebar-nav-item-sub sidebar-nav-item" href="/category/other/">> other</a>
          
        
      
        
          
        
      
        
          
            <a class="sidebar-nav-item-sub sidebar-nav-item" href="/category/reverse/">> reverse</a>
          
        
      

    
    
      
        
          
        
      
    
      
    
      
        
          
        
      
    
      
        
          
        
      
    
      
        
          
        
      
    
      
        
          
        
      
    
      
        
          
        
      
    
      
        
          
        
      
    
      
        
          
            <a class="sidebar-nav-item" href="/privacy/">privacy</a>
          
        
      
    
      
        
          
            <a class="sidebar-nav-item" href="/about/">about</a>
          
        
      
    

  </nav>


    <hr class="sidebar-separator">

    <div id="sidebar-icon-links">
    
  <a class="icon" title="Root-Me profil" aria-label="Root-Me profil" href="https://www.root-me.org/apges01" target="_blank">
    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve">  <image id="image0" width="32" height="32" x="0" y="0"
    href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJN
AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElN
RQfjCwkWHxp+T5UxAAADEklEQVRIx82UX0jdZRjHP7/D4XA4/BCRwyGGmIwlIhLDi00kLGLIGiEx
TCZBFzFG0P6ErCatEUO8iBhD1vAiYsgay5YXMqitM5HlRvRnKY5FFI0Fbph4YSZrk9P5dHGOZ3b8
qUE3PVfv+z7f5/u83/d53gf+owXrOX2ZBJfYwxfB1FqY+BqhGbaxnQbmuc8sQ55mkslg8V8SuItD
3CNLnhiT9HGCHMe474FgekNNpn3Xc9YBWONW8MOiZ4e/ud/YRgRn7LeiIMNRbxovEVR6w8/ds44E
U3QzzQAZF+kmwSkagpxYxSBJLnKJ4wybDz5ZK/tTZg3tc9S99pk2YQIc9G0HPO+YW8BWsyaiw2MO
2Qa+Ym9RxLB3C5pNO+CZIq7XV6MJHnPUNIBxMAbuN1skqHXCpuUSe7mAK3+DncxSbTUQ8yhVvhi8
b4KQBRvp50DwfQEWzJqjnmuF3cqiPM1waT3BFEvAx3RaTT8XgmsrkD+QZrV5wQSYBKtKZ3FH/crm
MuSInZFlJG8zh7zDHz7gCj8R8gYLHAm++0d4nBbORRE8oJ5NhJwPpsAORpjjbHCkLHuS18mxFCXh
oIeNmzFuyt1m7bfOVX/FNsfN+kwUQY1j1triXq87WOiE8uzu8KrtZt20fLZiHljBt/xIkst8xu0g
4pJ208VptpOmK8itfoMUX5LnNfJkyJWFxmnjKC18xDRV5EixsLoPZvmFu0EO2Mo71j3qeBs5wVla
AJjiOT4IFiKqEOS9TSUEee/Z/vuzDxv//DQ5zhIv8fyKNIssMfNoGz3SZoK5uVM3U03vPR6ywM4V
njusZ3a6r7jabNZxT5oxbo9/qQ+9YYcxU140sxZBh0Mmi+tKN5kEK03Y688edjOADU6YXosgaY9Z
S4qN2+4tt5X2lXb6tbvWExHzBcc8WLiHFb7lPtuLvtAhR6zbeKwmvG5r6Q5PLrezb3pydWtHsAVL
zIC1HgdCjhFaZw8Avwa5cnR0GZM0Uc9urxKyhVZq6PIbnuBWRLpIEX00kydknhghi8QImSdFb3CF
/539DagplOU/gNJHAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIwLTA1LTA3VDE5OjAzOjA2KzAyOjAw
95u+EQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMS0wOVQyMTozMToyNiswMTowMBkgVUYAAAAA
SUVORK5CYII=" />
</svg>

  </a>
  


  <a class="icon" title="Github profil" aria-label="Github profil" href="https://github.com/AdelAlm" target="_blank">
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 28"><path d="M12 2c6.625 0 12 5.375 12 12 0 5.297-3.437 9.797-8.203 11.391-0.609 0.109-0.828-0.266-0.828-0.578 0-0.391 0.016-1.687 0.016-3.297 0-1.125-0.375-1.844-0.812-2.219 2.672-0.297 5.484-1.313 5.484-5.922 0-1.313-0.469-2.375-1.234-3.219 0.125-0.313 0.531-1.531-0.125-3.187-1-0.313-3.297 1.234-3.297 1.234-0.953-0.266-1.984-0.406-3-0.406s-2.047 0.141-3 0.406c0 0-2.297-1.547-3.297-1.234-0.656 1.656-0.25 2.875-0.125 3.187-0.766 0.844-1.234 1.906-1.234 3.219 0 4.594 2.797 5.625 5.469 5.922-0.344 0.313-0.656 0.844-0.766 1.609-0.688 0.313-2.438 0.844-3.484-1-0.656-1.141-1.844-1.234-1.844-1.234-1.172-0.016-0.078 0.734-0.078 0.734 0.781 0.359 1.328 1.75 1.328 1.75 0.703 2.141 4.047 1.422 4.047 1.422 0 1 0.016 1.937 0.016 2.234 0 0.313-0.219 0.688-0.828 0.578-4.766-1.594-8.203-6.094-8.203-11.391 0-6.625 5.375-12 12-12zM4.547 19.234c0.031-0.063-0.016-0.141-0.109-0.187-0.094-0.031-0.172-0.016-0.203 0.031-0.031 0.063 0.016 0.141 0.109 0.187 0.078 0.047 0.172 0.031 0.203-0.031zM5.031 19.766c0.063-0.047 0.047-0.156-0.031-0.25-0.078-0.078-0.187-0.109-0.25-0.047-0.063 0.047-0.047 0.156 0.031 0.25 0.078 0.078 0.187 0.109 0.25 0.047zM5.5 20.469c0.078-0.063 0.078-0.187 0-0.297-0.063-0.109-0.187-0.156-0.266-0.094-0.078 0.047-0.078 0.172 0 0.281s0.203 0.156 0.266 0.109zM6.156 21.125c0.063-0.063 0.031-0.203-0.063-0.297-0.109-0.109-0.25-0.125-0.313-0.047-0.078 0.063-0.047 0.203 0.063 0.297 0.109 0.109 0.25 0.125 0.313 0.047zM7.047 21.516c0.031-0.094-0.063-0.203-0.203-0.25-0.125-0.031-0.266 0.016-0.297 0.109s0.063 0.203 0.203 0.234c0.125 0.047 0.266 0 0.297-0.094zM8.031 21.594c0-0.109-0.125-0.187-0.266-0.172-0.141 0-0.25 0.078-0.25 0.172 0 0.109 0.109 0.187 0.266 0.172 0.141 0 0.25-0.078 0.25-0.172zM8.937 21.438c-0.016-0.094-0.141-0.156-0.281-0.141-0.141 0.031-0.234 0.125-0.219 0.234 0.016 0.094 0.141 0.156 0.281 0.125s0.234-0.125 0.219-0.219z"></path>
</svg>

  </a>



  <a class="icon" title="Linkedin profil" aria-label="Linkedin profil" href="https://www.linkedin.com/in/adel-allam/" target="_blank">
    <?xml version="1.0" encoding="iso-8859-1"?>
<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="430.117px" height="430.118px" viewBox="0 0 430.117 430.118" style="enable-background:new 0 0 430.117 430.118;"
	 xml:space="preserve">
<g>
	<path id="LinkedIn__x28_alt_x29_" d="M398.355,0H31.782C14.229,0,0.002,13.793,0.002,30.817v368.471
		c0,17.025,14.232,30.83,31.78,30.83h366.573c17.549,0,31.76-13.814,31.76-30.83V30.817C430.115,13.798,415.904,0,398.355,0z
		 M130.4,360.038H65.413V165.845H130.4V360.038z M97.913,139.315h-0.437c-21.793,0-35.92-14.904-35.92-33.563
		c0-19.035,14.542-33.535,36.767-33.535c22.227,0,35.899,14.496,36.331,33.535C134.654,124.415,120.555,139.315,97.913,139.315z
		 M364.659,360.038h-64.966V256.138c0-26.107-9.413-43.921-32.907-43.921c-17.973,0-28.642,12.018-33.327,23.621
		c-1.736,4.144-2.166,9.94-2.166,15.728v108.468h-64.954c0,0,0.85-175.979,0-194.192h64.964v27.531
		c8.624-13.229,24.035-32.1,58.534-32.1c42.76,0,74.822,27.739,74.822,87.414V360.038z M230.883,193.99
		c0.111-0.182,0.266-0.401,0.42-0.614v0.614H230.883z"/>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>

  </a>



  <a class="icon" title="Twitter profil" aria-label="Twitter profil" href="https://twitter.com/apges01" target="_blank">
    <?xml version="1.0" encoding="iso-8859-1"?>
<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="510px" height="510px" viewBox="0 0 510 510" style="enable-background:new 0 0 510 510;" xml:space="preserve">
<g>
	<g id="post-twitter">
		<path d="M459,0H51C22.95,0,0,22.95,0,51v408c0,28.05,22.95,51,51,51h408c28.05,0,51-22.95,51-51V51C510,22.95,487.05,0,459,0z
			 M400.35,186.15c-2.55,117.3-76.5,198.9-188.7,204C165.75,392.7,132.6,377.4,102,359.55c33.15,5.101,76.5-7.649,99.45-28.05
			c-33.15-2.55-53.55-20.4-63.75-48.45c10.2,2.55,20.4,0,28.05,0c-30.6-10.2-51-28.05-53.55-68.85c7.65,5.1,17.85,7.65,28.05,7.65
			c-22.95-12.75-38.25-61.2-20.4-91.8c33.15,35.7,73.95,66.3,140.25,71.4c-17.85-71.4,79.051-109.65,117.301-61.2
			c17.85-2.55,30.6-10.2,43.35-15.3c-5.1,17.85-15.3,28.05-28.05,38.25c12.75-2.55,25.5-5.1,35.7-10.2
			C425.85,165.75,413.1,175.95,400.35,186.15z"/>
	</g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>

  </a>



  <a class="icon" title="Cryptis" aria-label="Cryptis" href="http://teamcryptis.fr/" target="_blank">
    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="467px" height="484px" viewBox="0 0 467 484" enable-background="new 0 0 467 484" xml:space="preserve">  <image id="image0" width="467" height="484" x="0" y="0"
    xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdMAAAHkCAMAAABSXzWKAAAABGdBTUEAALGPC/xhBQAAACBjSFJN
AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAY1BMVEUAAAD/////////////
///////////////////////////////////////////////7x3j8x3j7x3j7yHf8x3j8yHf/x3j8
x3j8x3j9xnn9yHf8yHf8xnn/v4D6xXr////8x3jKFOSNAAAAH3RSTlMAIEBwgI+/799QEK8wn89g
QGCAj7+vIN+fcM/vUBAwb4xV9gAAAAFiS0dEAf8CLd4AAAAHdElNRQfjDB8AOw3TjfrBAAAfs0lE
QVR42u1d62KyuhJVRPAOtfZi+1n7/k/5qa2FQICZyYRMYtavs/c+VsNiJmsumUwmERERERERERER
EREREREREREREREREREREREREREREREREREREREREREREREREREREQFhmiSzNJ1nF+TnNhbX/5Cm
6TJJVq5/akQ/VsnySuQZhUW2TtNk4/q3RzSxWaZbJJdtbudpMnW9kIjJ1TbT9c6MTQXZfJa4XtMD
40rngpHOCrvtLDrj0TEttpzWqbXYdBkV1Fi48GnHPDUGO4+8WsdqPD4rXuMGaw+b1La/7UC+LqIi
toDlNjcnx8Rc0yibOLEq1k75/MViHmnlgRBCI61sWG5d09imNe6tBtjM3e6hXdjNYoRDwmrmSOWC
sF26fj7+IRHnc5tYpNEHI7CajZ1YoGEbsxFATB1HohgsirizDiMxrIOOjTy64AEUfjhdFdvIaidW
qY+MXpHFjVWLVerPNhpZhcBvRiOrbfjPaGRVRRiMRlZrSHxVRlpWY93mgtQ1DcyIkc1EfF4Xj/TB
c0sBUno+5zPXj9UlQnO8d+weVywlrp+9PawfdFtdhaR4m8hT14/XCUL1vL94RAe8CiXV0In5wyng
wM30ivzR2pZC3k3/sH4oU924ftzj4KFMdeb6aY+FBzLVIFNIWjyOqXrWTGaERxHAdp/iLsvmaTpL
brh/5eb2T0Waphl25o7pz3mMGpyVZ5dn6wuRwAc4vQ1UGkl+P0Ren/mZLbK0IM4l2yx5B/Lo8QhS
iZHOdcowZS6ZWZ7lsgjf//I8QOaRN0m6tpixDN7/mouULLWSJd/MrPEauv81S/cu5laDvs3Mji4O
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
MyswMzowMCvbYHQAAAAASUVORK5CYII=" />
</svg>

  </a>






</div>






  <div class="sidebar-item">
    <p style="font-size: 0.9em;">
      2018 - 2020 &copy; Adel ALLAM.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Adel ALLAM</a>
            <small>Blog-notes</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="post">
  <h1 class="post-title">lpic-1</h1>
  <span class="post-date">22 May 2018</span>
  <!--more-->

<hr />
<h1 id="i---get-help">I - Get help</h1>
<hr />
<h3 id="help-h">–help/-h</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># help option</span>
<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">--help</span>

<span class="c"># show internal (builtin) commands</span>
<span class="nv">$ </span><span class="nb">help</span>

<span class="c"># internal command help</span>
<span class="nv">$ </span><span class="nb">help </span>pdw
</code></pre></div></div>

<h3 id="man">man</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left">section</th>
      <th style="text-align: left">content</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left">shell commands or instruction</td>
    </tr>
    <tr>
      <td style="text-align: left">2</td>
      <td style="text-align: left">system calls (API du noyau,…)</td>
    </tr>
    <tr>
      <td style="text-align: left">3</td>
      <td style="text-align: left">appels des bibliothèques (fonctions C,…)</td>
    </tr>
    <tr>
      <td style="text-align: left">4</td>
      <td style="text-align: left">special files (contenu de /dev comme sd, hd, pts,…)</td>
    </tr>
    <tr>
      <td style="text-align: left">5</td>
      <td style="text-align: left">files format (/etc/passwd, /etc/hosts,…)</td>
    </tr>
    <tr>
      <td style="text-align: left">6</td>
      <td style="text-align: left">games, screen saver, gadgets,…</td>
    </tr>
    <tr>
      <td style="text-align: left">7</td>
      <td style="text-align: left">non standard commands</td>
    </tr>
    <tr>
      <td style="text-align: left">8</td>
      <td style="text-align: left">commands for system administration</td>
    </tr>
    <tr>
      <td style="text-align: left">9</td>
      <td style="text-align: left">sous-programme du noyaun (souvent vide)</td>
    </tr>
  </tbody>
</table>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># manual page</span>
<span class="nv">$ </span>man passwd

<span class="c"># give number page</span>
<span class="nv">$ </span>man <span class="nt">-5</span> passwd

<span class="c"># search command</span>
<span class="nv">$ </span>man <span class="nt">-k</span> passwd
</code></pre></div></div>

<h3 id="info">info</h3>
<p>Info pages: format + links + page navigation.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># info page</span>
<span class="nv">$ </span>info <span class="nb">sed</span>

<span class="c"># show command options</span>
<span class="nv">$ </span>info <span class="nt">--show-options</span> <span class="nb">date</span>

<span class="c"># search command</span>
<span class="nv">$ </span>info <span class="nt">--apropos</span> <span class="nb">date</span>
</code></pre></div></div>

<hr />
<h1 id="ii---shared-libraries">II - Shared libraries</h1>
<hr />
<ul>
  <li>linking with <code class="highlighter-rouge">ld</code>, used by <code class="highlighter-rouge">gcc -l &lt;lib&gt;</code></li>
  <li>Shared Object <code class="highlighter-rouge">.so</code></li>
  <li>location:
    <ul>
      <li><code class="highlighter-rouge">/lib[64]</code>: system libraries, essential for boot</li>
      <li><code class="highlighter-rouge">/usr/lib</code>: for users, non essential for boot</li>
      <li><code class="highlighter-rouge">/usr/local/lib</code>: local libraries</li>
      <li><code class="highlighter-rouge">/usr/X11/lib</code>: for programs</li>
      <li>systemd moved <code class="highlighter-rouge">/lib[64]</code> in <code class="highlighter-rouge">/usr/lib[64]</code></li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">/lib/x86_64-linux-gnu/libc.so</code>: most important lib</li>
  <li>a lot of symlink to manage versions</li>
</ul>

<p><code class="highlighter-rouge">ld.so</code> or <code class="highlighter-rouge">ld-linux.so</code>: search libs and manage cache.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># all programs are linked to ld.so</span>
<span class="c"># program's libs</span>
<span class="nv">$ </span>ldd /bin/vim

<span class="c"># global conf</span>
<span class="nv">$ </span>vim /etc/ld.so.conf

<span class="c"># personal conf</span>
<span class="nv">$ </span>vim /etc/ld.so.conf.d/

<span class="c"># order for the search</span>
<span class="nv">$ LD_LIBRARY_PATH</span><span class="o">=</span>
<span class="nv">$ </span>/etc/ld.so.cache
<span class="nv">$ </span>/lib[64]

<span class="c"># regenerate cache</span>
<span class="nv">$ </span><span class="nb">sudo </span>ldconfig <span class="nt">-V</span>
<span class="c"># -V: verbose</span>
<span class="c"># -N: don't regenerate cache</span>
<span class="c"># -X: not link updates</span>
<span class="c"># -p: list cache content</span>
</code></pre></div></div>
<hr />
<hr />

<hr />
<h1 id="i---shell">I - Shell</h1>
<hr />
<ul>
  <li><code class="highlighter-rouge">bash</code>: command interpretor</li>
  <li><code class="highlighter-rouge">kernel</code>: noyau</li>
  <li><code class="highlighter-rouge">shell</code>: coquille, ce qui entoure le noyau
    <blockquote>
      <p>Ex: sh, csh, ksh, zsh, bash, tcsh, ash, dash</p>
    </blockquote>
  </li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># all shells available</span>
<span class="nv">$ </span>vim /etc/shells

<span class="nv">$ </span><span class="c"># user prompt</span>
<span class="c"># # root prompt</span>

<span class="nv">$ </span><span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"Salut </span><span class="se">\t</span><span class="s2"> ça va ?</span><span class="se">\n</span><span class="s2">"</span>
<span class="c"># \n: saut ligne</span>
<span class="c"># \t: tabulation</span>
<span class="c"># \c: supprimer sout de ligne final</span>
<span class="c"># \b: retour d'un caractère en arrière</span>

<span class="c"># chainer commande</span>
<span class="nv">$ </span><span class="nb">date</span><span class="p">;</span> <span class="nb">pwd</span><span class="p">;</span> cal<span class="p">;</span> <span class="nb">echo</span>
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th style="text-align: left">cheat sheet</th>
      <th style="text-align: left">action</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">ctrl + a</code></td>
      <td style="text-align: left">aller debut ligne</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">ctrl + e</code></td>
      <td style="text-align: left">aller fin ligne</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">ctrl + l</code></td>
      <td style="text-align: left">effacer</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">ctrl + u</code></td>
      <td style="text-align: left">efffacer jusqu’au début</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">ctrl + k</code></td>
      <td style="text-align: left">effacer jusqu’à la fin</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">ctrl + w</code></td>
      <td style="text-align: left">effacer mot à gauche</td>
    </tr>
  </tbody>
</table>

<h3 id="command-type">command type</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># external: in the hard drive, load in memory for execution</span>
<span class="c"># internal: in shell, execution inside shell (cd, pwd)</span>

<span class="nv">$ </span><span class="nb">type date</span>
<span class="c"># date is /usr/bin/date</span>

<span class="nv">$ </span><span class="nb">type pwd</span>
<span class="c"># shell builtin</span>
</code></pre></div></div>
<h3 id="interruption">interruption</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left">cheat sheet</th>
      <th style="text-align: left">action</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">ctrl + c</code></td>
      <td style="text-align: left">on demande qu’il se termine</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">ctrl + z</code></td>
      <td style="text-align: left">mettre en pause</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">ctrl + d</code></td>
      <td style="text-align: left">fin de saisie</td>
    </tr>
  </tbody>
</table>

<h3 id="history">history</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat</span> .bash_history <span class="c"># user history</span>
<span class="nv">$ </span><span class="nb">history</span> <span class="c"># recent history</span>
<span class="nv">$ </span><span class="nb">fc</span> <span class="nt">-l</span> <span class="c"># recent history</span>
<span class="nv">$ </span><span class="nb">fc</span> <span class="nt">-s</span> 118 <span class="c"># call command</span>
<span class="nv">$ </span><span class="nb">fc</span> <span class="nt">-s</span> <span class="nb">fc</span><span class="o">=</span><span class="nb">ls </span>21 <span class="c"># with replacement</span>
</code></pre></div></div>

<h3 id="files">files</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># FS: File System</span>
<span class="c"># 1-regular files</span>
<span class="c"># 2-directory</span>
<span class="c"># 3-special files (/dev)</span>

<span class="nv">$ </span><span class="nb">cd</span> / <span class="c"># root directory != /root</span>
<span class="nv">$ </span><span class="nb">cd</span> /home/mourad <span class="c"># home directory</span>
<span class="nv">$ </span><span class="nb">cd</span> ~
<span class="nv">$ </span><span class="nb">touch</span> <span class="c"># change date</span>

<span class="nv">$ </span><span class="nb">mkdir</span> <span class="nt">-p</span> <span class="c"># create  arborescence</span>

<span class="nv">$ </span><span class="nb">cp</span>
<span class="nv">$ </span><span class="nb">mv</span>
<span class="nv">$ </span><span class="nb">rm</span>
<span class="c"># -r : recursive</span>
<span class="c"># -i : confirmation</span>
<span class="c"># -p : keep date and permissions</span>

<span class="nv">$ </span><span class="nb">cat</span>
<span class="nv">$ </span><span class="nb">ln</span> <span class="nt">-s</span> file <span class="nb">link</span>
<span class="c"># red symbolique links = ne pointe vers rien</span>

<span class="c"># ls size = taille fichier ordinaire seulement et non sous repertoire (du)</span>

<span class="c"># remove le file -i</span>
<span class="nv">$ </span><span class="nb">rm</span> <span class="nt">--</span> <span class="nt">-i</span>

<span class="nv">$ </span>file a.out <span class="c"># file type</span>
</code></pre></div></div>

<h3 id="wildcards">wildcards</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left">wildcards</th>
      <th style="text-align: left">action</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">*</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">?</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">[abc]</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">[a-z]</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">[!...]</code></td>
      <td style="text-align: left">inverse</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">[^...]</code></td>
      <td style="text-align: left">inverse</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">\</code></td>
      <td style="text-align: left">escape character</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">'...'</code></td>
      <td style="text-align: left">escape all</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">"..."</code></td>
      <td style="text-align: left">escape all but keep variables</td>
    </tr>
  </tbody>
</table>

<h3 id="find">find</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left">option</th>
      <th style="text-align: left">example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">-name</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">fich*</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">-type</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">b,c,d,f,l,p,s</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">-user</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">mourad or UID</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">-group</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">root or GID</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">-size</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">+-100b,c,w,k,M,G</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">-empty</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">-size 0</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">-atime</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">access time</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">-mtime</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">modification time</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">-ctime</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">change time</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">-perm</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">[+-]777</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">-links</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">[+-]3</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">-inume</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">inode</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">-[i]regex</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">'.*slyunix/t-shirt.*'</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">-print</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">implicite</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">-ls</code></td>
      <td style="text-align: left">``</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">-exec</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">rm -f {} \;</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">-ok</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">rm -f {} \;</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">-a</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">-and</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">-o</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">-or</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">!</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">not</code></td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>Ex: <code class="highlighter-rouge">$ find . ! \( -type f -o -type d \) -ls</code></p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>whereis <span class="c"># cherche binaire et source, -b, -m, s</span>
<span class="nv">$ </span>which <span class="o">[</span><span class="nt">-a</span><span class="o">]</span> <span class="c"># premiére occurence dans $PATH</span>
<span class="nv">$ </span>locate <span class="c"># chercher fichier via BDD /var/lib/located.d via updatedb dans /etc/sysconfig/locate</span>
</code></pre></div></div>

<h3 id="redirection">redirection</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># standard output</span>
<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-al</span> /home/ <span class="o">&gt;</span> home_content.txt
<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-al</span> /home/ <span class="o">&gt;&gt;</span> home_content.txt
<span class="c"># redirections are interpreted from right to the left</span>

<span class="nv">$ </span><span class="nb">wc</span> &lt; text.txt <span class="c"># standard input</span>

<span class="nv">$ </span><span class="nb">wc</span> <span class="se">\&lt;\&lt;</span> fin <span class="c"># writing to "fin"</span>
<span class="nv">$ </span><span class="nb">tr</span> <span class="s2">"[a-z]"</span> <span class="s2">"[A-Z]"</span> <span class="se">\&lt;</span>&lt; fin
<span class="nv">$ </span><span class="nb">tr</span> <span class="s2">"[a-z]"</span> <span class="s2">"[A-Z]"</span> <span class="o">&lt;&lt;&lt;</span> <span class="k">$(</span><span class="nb">cat </span>file<span class="k">)</span>

<span class="c"># standard output</span>
<span class="c"># input: stdin, descriptor 0 or &amp;0</span>
<span class="c"># output: stdout, descriptor 1 or &amp;1</span>
<span class="c"># error: stderr, descriptor 2 or &amp;2</span>
<span class="c"># order: &lt;,&gt;,&gt;&gt;</span>

<span class="nv">$ </span><span class="nb">exec </span>3&gt;dump.log <span class="c"># create output (3 to 9)</span>
<span class="nb">ls</span> <span class="nt">-l</span> <span class="o">&gt;</span>&amp;3 <span class="c"># used</span>
<span class="nb">exec </span>3&gt;&amp;- <span class="c"># closed</span>
</code></pre></div></div>

<h3 id="filters">filters</h3>
<p>programme which read and write and traite data of standard output: <code class="highlighter-rouge">wc</code>, <code class="highlighter-rouge">more</code>, <code class="highlighter-rouge">grep</code>
pipeline, tubes, pipe
redirigiger canal de sortie d’une commande vers canal d’entrée d’une autre
redirect command output to input of other command</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># normal</span>
<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span> <span class="o">&gt;</span> res.txt
<span class="nv">$ </span><span class="nb">wc</span> &lt; res.txt

<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span> | <span class="nb">wc</span> <span class="c"># better</span>

<span class="nv">$ </span>direname /tmp/a/liste <span class="c"># -&gt; /tmp/mourad</span>
<span class="nv">$ </span><span class="nb">basename</span> /tmp/a/liste <span class="c"># -&gt; liste</span>

<span class="c"># grep, egrep, fgrep: select lines from file</span>
<span class="c"># -v inverse</span>
<span class="c"># -c return line number</span>
<span class="c"># -n give the line number also</span>
<span class="c"># -i case sensitive</span>
<span class="c"># -l give source, in case of multipl files</span>

<span class="c"># regular expressions</span>
<span class="nv">$ </span>egrep
<span class="nv">$ </span><span class="nb">grep</span> <span class="nt">-E</span>

<span class="c"># fast grep</span>
<span class="nv">$ </span>fgrep
<span class="nv">$ </span><span class="nb">grep</span> <span class="nt">-F</span>

<span class="c"># stream editor</span>
<span class="nv">$ </span><span class="nb">sed</span> <span class="nt">-e</span> <span class="s1">'s/__NOM__/Toto/g'</span> file.txt
<span class="nv">$ </span><span class="nb">sed</span> <span class="nt">-e</span> <span class="s2">"s/</span><span class="se">\(</span><span class="s2">toto</span><span class="se">\)</span><span class="s2">/**</span><span class="se">\1</span><span class="s2">**/g"</span> file.txt
<span class="nv">$ </span><span class="nb">sed</span> <span class="nt">-e</span> <span class="s1">'/^ *$/d'</span> file.txt: remove empty lines

<span class="c"># columns</span>
<span class="nv">$ </span><span class="nb">cut</span> <span class="nt">-cNUM</span>
<span class="nv">$ </span><span class="nb">cut</span> <span class="nt">-c2</span>
<span class="nv">$ </span><span class="nb">cut</span> <span class="nt">-c2-4</span>
<span class="nv">$ </span><span class="nb">cut</span> <span class="nt">-c1</span>,2,3-10

<span class="c"># fields</span>
<span class="nv">$ </span><span class="nb">cut</span> <span class="nt">-dC</span> <span class="nt">-fCHAMP</span>: sélectionner champ séparé par tab
<span class="nv">$ </span><span class="nb">cut</span> <span class="nt">-f1</span> fichier
<span class="nv">$ </span><span class="nb">cut</span> <span class="nt">-f1</span>,3 fichier
<span class="nv">$ </span><span class="nb">cut</span> <span class="nt">-d</span>: <span class="nt">-f1</span>,3 /etc/passwd

<span class="c"># count lines</span>
<span class="nv">$ </span><span class="nb">wc</span> 
<span class="c"># -l : lines </span>
<span class="c"># -c : bytes</span>
<span class="c"># -w : words</span>
<span class="c"># -m : characters</span>

<span class="c"># split file</span>
<span class="nv">$ </span><span class="nb">split</span> <span class="o">[</span><span class="nt">-ln</span><span class="o">]</span> <span class="o">[</span><span class="nt">-b</span> Nbkm] <span class="o">[</span>fic[prefix]]
<span class="nv">$ </span><span class="nb">split</span> <span class="nt">-b</span> 150m debian.iso fic
<span class="c"># will create ficaa, ficab,...</span>
<span class="c"># -b: all files have same size</span>
<span class="c"># -l: ... have same lines number</span>

<span class="nv">$ </span><span class="nb">cat </span>fic<span class="k">*</span> <span class="o">&gt;</span> debian.iso <span class="c"># reconstrution</span>

<span class="nv">$ </span><span class="nb">tr</span> <span class="o">[</span>option] original dist <span class="c"># replace character</span>
<span class="nv">$ </span><span class="nb">cat </span>liste.txt | <span class="nb">tr</span> <span class="s2">"oi"</span> <span class="s2">"ea"</span>

<span class="c"># replace spaces by :</span>
<span class="nv">$ </span><span class="nb">tr</span> <span class="nt">-s</span> <span class="s2">" "</span> <span class="s2">":"</span>

<span class="nv">$ </span><span class="nb">expand</span> <span class="c"># tabulation to spaces</span>
<span class="nv">$ </span><span class="nb">unexpand</span> <span class="c"># spaces to tab</span>

<span class="c"># manage output</span>
<span class="c"># read output delimited by space or line break</span>
<span class="c"># and execute command on them</span>
<span class="nv">$ </span><span class="nb">cat </span>input | xargs
<span class="nv">$ </span><span class="nb">cat </span>input | xargs <span class="nt">-n</span> 2
<span class="c"># 2 columns</span>

<span class="c"># other</span>
<span class="nv">$ </span><span class="nb">sort</span>
<span class="nv">$ </span><span class="nb">uniq</span>
<span class="nv">$ </span><span class="nb">join</span>
<span class="nv">$ </span><span class="nb">paste</span>

<span class="nv">$ </span><span class="nb">cat</span>
<span class="nv">$ </span><span class="nb">tac</span>
<span class="nv">$ </span>hexdump
<span class="nv">$ </span><span class="nb">od</span>
<span class="nv">$ </span>banner
<span class="nv">$ </span><span class="nb">cat</span> <span class="nt">-n</span> ou <span class="nb">nl</span>
<span class="nv">$ </span><span class="nb">head</span>
<span class="nv">$ </span><span class="nb">tail</span> <span class="nt">-f</span>

<span class="nv">$ </span>column <span class="nt">-s</span>: <span class="nt">-t</span> /etc/passwd

<span class="c"># duplication du canal</span>
<span class="nv">$ </span><span class="nb">tee</span> <span class="o">[</span><span class="nt">-a</span><span class="o">]</span>
<span class="nv">$ </span><span class="nb">cat</span> /etc/passwd | <span class="nb">cut</span> <span class="nt">-d</span>: <span class="nt">-f1</span> | <span class="nb">tee </span>users.txt | <span class="nb">wc</span> <span class="nt">-l</span>
<span class="c"># -a: append, n'écrase pas contenu fichier</span>

<span class="nv">$ </span>diff
<span class="nv">$ </span>comp

<span class="nv">$ </span><span class="nb">sleep </span>10

<span class="c"># controler flux</span>
<span class="nv">$ </span>pv <span class="nb">test</span> <span class="o">&gt;</span> test2
<span class="c"># durée compression</span>
pv /blabla/fic | <span class="nb">gzip</span> <span class="o">&gt;</span> test.gz
</code></pre></div></div>

<hr />
<h1 id="ii---process">II - Process</h1>
<hr />

<ul>
  <li><code class="highlighter-rouge">PID</code></li>
  <li><code class="highlighter-rouge">PPID</code></li>
  <li><code class="highlighter-rouge">UID</code></li>
  <li><code class="highlighter-rouge">GID</code></li>
  <li><code class="highlighter-rouge">priority</code></li>
  <li><code class="highlighter-rouge">working directory</code></li>
  <li>opened files (descripteurs)
processus fils du shell pour lancer commandes
ls -R / &gt; ls.txt 2&gt;/dev/null &amp;
le process en fond ne doit pas attendre de saisie
pas d’affichage
ne pas quitter shell avec traitement</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">jobs
</span>numJob PID
ctrl + z: mettre en pause

<span class="nv">$ </span><span class="nb">fg</span> <span class="c"># to foreground</span>
<span class="nv">$ </span><span class="nb">bg</span> <span class="c"># to background</span>

<span class="c">### list process</span>
<span class="nv">$ </span>ps <span class="c"># process launch by user from current shell</span>

<span class="nv">$ </span>ps <span class="nt">-ef</span> <span class="c"># all process</span>
<span class="c"># -f: more info</span>
<span class="c"># -e: all process</span>
<span class="c"># -u mourad</span>
<span class="c"># -g wheel</span>
<span class="c"># -t tty0: terminal</span>
<span class="c"># -p 123445</span>
<span class="c"># l: more more info</span>
</code></pre></div></div>

<h3 id="signals">signals</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># show all available signals</span>
<span class="nv">$ </span><span class="nb">kill</span> <span class="nt">-l</span>
<span class="c"># 1(SIGHUP): send by parent process before die</span>
<span class="c"># 2(SIGINT): interruption (ctrl + c)</span>
<span class="c"># 3(SIGQUIT): interruption + core dump</span>
<span class="c"># 9(SIGKILL): force fin brutale</span>
<span class="c"># 15(SIGTERM): by default, fin gentille</span>

<span class="nv">$ </span><span class="nb">kill </span>1234 <span class="c"># kill process by PID</span>
<span class="nv">$ </span><span class="nb">kill</span> <span class="nt">-n</span> 9 1234 <span class="c"># with signal</span>
<span class="nv">$ </span>pkill firefox <span class="c"># kill process with its name</span>

<span class="nv">$ </span>pgrep <span class="nb">sleep</span> <span class="c"># get PID with process name</span>

<span class="nv">$ </span><span class="nb">nohup ls</span> <span class="nt">-lR</span> / &amp; <span class="c"># ne plus tenir compte du SIGHUP lorsque le pére meurt</span>
</code></pre></div></div>

<h3 id="priority">priority</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># launch command with priority</span>
<span class="nv">$ </span><span class="nb">nice</span> <span class="nt">-10</span> <span class="nb">ls</span> <span class="nt">-lR</span> <span class="o">&gt;</span>list 2&gt;/dev/null &amp;

<span class="c"># change priority of process</span>
<span class="nv">$ </span>renice <span class="nt">-n</span> 10 <span class="o">[</span><span class="nt">-p</span><span class="o">]</span> <span class="o">[</span><span class="nt">-g</span><span class="o">]</span> <span class="o">[</span><span class="nt">-u</span><span class="o">]</span> 1234

<span class="nv">$ </span><span class="nb">time ls</span> <span class="nt">-lR</span> /home
<span class="c"># real: durée total exec commande</span>
<span class="c"># user: CPU time</span>
<span class="c"># system: durée du temps CPU necessaire pour éxecuter commande</span>

<span class="nv">$ </span><span class="nb">exec </span>ksh <span class="c"># replace current process by another</span>
</code></pre></div></div>

<h3 id="groupement">groupement</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">uname</span> <span class="nt">-a</span> <span class="p">;</span> <span class="nb">pwd</span> <span class="p">;</span> <span class="nb">ls</span> <span class="nt">-l</span> <span class="o">&gt;</span> res.txt &amp; <span class="c"># multipls shells</span>
<span class="nv">$ </span><span class="o">(</span><span class="nb">uname</span> <span class="nt">-a</span> <span class="p">;</span> <span class="nb">pwd</span> <span class="p">;</span> <span class="nb">ls</span> <span class="nt">-l</span><span class="o">)</span> <span class="o">&gt;</span> res.txt &amp; <span class="c"># one shell</span>

<span class="c"># return code of last command</span>
<span class="c"># echo $?</span>
<span class="c"># 0 : success</span>
<span class="c"># else : error</span>

<span class="nv">$ </span>cmd <span class="o">&amp;&amp;</span> cmd <span class="c"># and</span>
<span class="nv">$ </span>cmd <span class="o">||</span> cmd <span class="c"># or</span>

<span class="nv">$ </span><span class="o">(</span><span class="nb">exit</span><span class="o">)</span> <span class="c"># launch in child</span>
<span class="nv">$ </span><span class="o">{</span><span class="nb">exit</span> <span class="p">;</span><span class="o">}</span> <span class="c"># launch in current shell</span>
</code></pre></div></div>
<h3 id="les-variables">les variables</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># user (minuscules)</span>
<span class="c"># system (majuscules)</span>
<span class="c"># speciale</span>

<span class="c"># variable</span>
<span class="nv">$ nom</span><span class="o">=</span>Mourad
<span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$nom</span>

<span class="nv">$ </span><span class="nb">env</span> <span class="c"># show user and system variables</span>

<span class="nv">$ </span><span class="s2">"..."</span> <span class="c"># read variables</span>
<span class="nv">$ </span><span class="s1">'...'</span> <span class="c"># don't read variables</span>

<span class="nv">$ </span><span class="nb">unset </span>nom <span class="c"># delete var</span>
<span class="nv">$ </span><span class="nb">readonly </span>nom <span class="c"># protect var (read only and can't delete)</span>
<span class="nv">$ </span><span class="nb">export </span>nom <span class="c"># share var with shell children, but modification is limited</span>

<span class="nv">$ </span><span class="nb">cp</span> <span class="k">${</span><span class="nv">fic</span><span class="k">}</span>1 <span class="k">${</span><span class="nv">fic</span><span class="k">}</span>2 <span class="c"># accolades</span>

<span class="c">### replacement</span>
<span class="nv">$ </span><span class="o">{</span>x:-texte<span class="o">}</span> <span class="c"># if x empty, else texte</span>
<span class="nv">$ </span><span class="o">{</span>x:<span class="o">=</span>texte<span class="o">}</span> <span class="c"># if x empty, x=texte</span>
<span class="nv">$ </span><span class="o">{</span>x:-texte<span class="o">}</span> <span class="c"># if x not empty, x=texte </span>
<span class="nv">$ </span><span class="o">{</span>x:?texte<span class="o">}</span> <span class="c"># if x empty, script stopped and display texte</span>
</code></pre></div></div>

<h3 id="system-variables">system variables</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left">variable</th>
      <th style="text-align: left">content</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">$HOME</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">$PATH</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">$PS1</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">$PS2</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">$PS3</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">$IFS</code></td>
      <td style="text-align: left">caractère standard de séparation des commandes</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">$MAIL</code></td>
      <td style="text-align: left">chemin des mails</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">$SHELL</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">$LANG</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">$USER</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">$LOGNAME</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">$HISTFILE</code></td>
      <td style="text-align: left">nom fichier history</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">$HISTSIZE</code></td>
      <td style="text-align: left">taille histiry</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">$OLDPWD</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">$PWD</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">$RANDOM</code></td>
      <td style="text-align: left">(0 à 32767)</td>
    </tr>
  </tbody>
</table>

<h3 id="speciale-variables">speciale variables</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># readonly, contexctual content</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$?</span> <span class="c"># return code of last command</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$$</span> <span class="c"># PID of current shell</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$!</span> <span class="c"># PID of last shell launch with &amp;</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$-</span> <span class="c"># shell options</span>
</code></pre></div></div>

<h3 id="strings">strings</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ a</span><span class="o">=</span>Jules
<span class="nv">$ </span><span class="nb">echo</span> <span class="s2">"Longueur de </span><span class="nv">$a</span><span class="s2">: </span><span class="k">${#</span><span class="nv">a</span><span class="k">}</span><span class="s2">"</span>

<span class="c"># array</span>
<span class="nv">$ </span>nom[0]<span class="o">=</span><span class="s2">"test"</span>
<span class="nv">$ </span>nom[1]<span class="o">=</span><span class="s2">"a"</span>

<span class="nv">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">nom</span><span class="p">[1]</span><span class="k">}</span>
<span class="c"># or</span>
<span class="nv">$ nom</span><span class="o">=(</span>text,a<span class="o">)</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">nom</span><span class="p">[*]</span><span class="k">}</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="k">${#</span><span class="nv">nom</span><span class="p">[*]</span><span class="k">}</span>
<span class="c"># si index est variable, pas de $</span>
<span class="nv">index</span><span class="o">=</span>0

<span class="nv">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">nom</span><span class="p">[index]</span><span class="k">}</span>

<span class="c"># variables typées</span>
<span class="c"># entier</span>
<span class="nv">$ </span><span class="nb">typeset</span> <span class="nt">-i</span> ma_var
<span class="nv">$ </span><span class="nb">let </span>res <span class="o">=</span> ma_var + 5 <span class="nv">res2</span><span class="o">=</span>a+b
<span class="c"># ou ((...))</span>
</code></pre></div></div>

<h3 id="le-shell">le shell</h3>
<p>connexion</p>
<ul>
  <li>shell connexion</li>
  <li>lance le shell du user dans <code class="highlighter-rouge">/etc/passwd</code></li>
  <li><code class="highlighter-rouge">/etc/profile</code> (inclu <code class="highlighter-rouge">/etc/profile.d/*</code>)</li>
  <li><code class="highlighter-rouge">~/.bash_profile</code></li>
  <li><code class="highlighter-rouge">~/.bash_login</code></li>
  <li><code class="highlighter-rouge">~/.profile</code></li>
</ul>

<p>déconnexion</p>
<ul>
  <li><code class="highlighter-rouge">~/.bash_logout</code></li>
</ul>

<p>shell mode non intéractif (pour les process)
pas de script au démarrage
BASH_ENV: permet d’en éxecuter un</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">set
</span>pour donner option à bash: man bash
<span class="c"># -a</span>
<span class="c"># -u</span>
<span class="c"># -x</span>
<span class="c"># -o vim</span>
<span class="c"># -C</span>
</code></pre></div></div>

<hr />
<h1 id="iii---shell-program">III - Shell program</h1>
<hr />
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c"># le sha-bang</span>
<span class="c"># chmod 555 scriptname (gives everyone read/execute permission)</span>
<span class="c"># chmod u+rx scriptname (gives only the script owner read/execute permission)</span>
<span class="c"># A script needs read, as well as execute permission for it to run, since the shell needs to be able to read it.</span>
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># file in .sh .ksh .csh</span>

<span class="c"># executable mode</span>
<span class="nv">$ </span><span class="nb">chmod</span> +x my_script.sh

<span class="nv">$ </span>./my_script.sh

<span class="nv">$ PATH</span><span class="o">=</span><span class="nv">$PATH</span>:.
<span class="nv">$ </span>my_script.sh

<span class="nv">$ </span><span class="nb">cat </span>my_script.sh
<span class="c">#!/bin/bash (+ options)</span>

<span class="c"># ; = lign jump</span>
</code></pre></div></div>

<hr />
<h1 id="iv---arguments">IV - Arguments</h1>
<hr />
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># position parameters = speciales variables</span>

<span class="c"># script name</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$0</span>

<span class="c"># parameters</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$1</span>...9

<span class="c"># parametres numbers</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$#</span>

<span class="c"># "$1 $2 $3 ..."</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$*</span>

<span class="c"># "$1" "$2" "$3" ...</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$@</span>

<span class="c"># $1=var1 $2=var2 $3=var3</span>
<span class="nv">$ </span><span class="nb">set </span>var1 var2 var3

<span class="nv">$ $1</span><span class="o">=</span><span class="nv">$2</span> <span class="nv">$2</span><span class="o">=</span><span class="nv">$3</span>
<span class="nv">$ </span><span class="nb">shift</span>
<span class="nv">$ </span><span class="nb">shift </span>4

<span class="c"># return 0 and quit</span>
<span class="nv">$ </span><span class="nb">exit</span>
<span class="nv">$ </span><span class="nb">exit </span>1

<span class="c"># return value</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$?</span>
</code></pre></div></div>

<hr />
<h1 id="v---process-environnement">V - Process environnement</h1>
<hr />
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># only exported values are available in script environnement</span>

<span class="c"># see environnement</span>
<span class="nv">$ </span><span class="nb">env</span>

<span class="c"># share var without export for every script</span>
<span class="nv">$ </span><span class="nb">env </span><span class="nv">var1</span><span class="o">=</span>val1 <span class="nv">var2</span><span class="o">=</span>val2 m_script.sh

<span class="c"># on bash</span>
<span class="nv">$ var1</span><span class="o">=</span>val1 <span class="nv">var2</span><span class="o">=</span>val2 m_script.sh

<span class="c"># only standard output is on variable</span>
<span class="c"># the error output is in screen</span>
</code></pre></div></div>

<hr />
<h1 id="vi---command-substitution">VI - Command substitution</h1>
<hr />
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ my_unix</span><span class="o">=</span><span class="sb">`</span><span class="nb">uname</span><span class="sb">`</span>
<span class="nv">$ machine</span><span class="o">=</span><span class="sb">`</span><span class="nb">uname</span> <span class="nt">-a</span> | <span class="nb">cut</span> <span class="nt">-d</span><span class="s2">" "</span> <span class="nt">-f5</span><span class="sb">`</span>

<span class="c"># bash</span>
<span class="nv">$ </span><span class="k">$()</span> replace <span class="sb">```</span>
</code></pre></div></div>

<hr />
<h1 id="vii---conditions">VII - Conditions</h1>
<hr />
<h3 id="strings-1">strings</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 0 if $var is empty</span>
<span class="nv">$ </span><span class="nb">test</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$var</span><span class="s2">"</span>

<span class="c"># 0 if $var is not empty</span>
<span class="nv">$ </span><span class="nb">test</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$var</span><span class="s2">"</span>

<span class="c"># 0 if equals</span>
<span class="nv">$ </span><span class="nb">test</span> <span class="s2">"var"</span> <span class="o">=</span> <span class="nv">$var</span>

<span class="c"># 0 if different</span>
<span class="nv">$ </span><span class="nb">test</span> <span class="s2">"var"</span> <span class="o">!=</span> <span class="nv">$var</span>

<span class="c"># "$a" is better than $a</span>
</code></pre></div></div>

<h3 id="numeric">numeric</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># test val1 option val2</span>
<span class="c"># options</span>
<span class="c"># -eq : ==</span>
<span class="c"># -ne : !=</span>
<span class="c"># -lt : &lt; (less than)</span>
<span class="c"># -gt : &gt; (greater than)</span>
<span class="c"># -le : &lt;= (less or equal)</span>
<span class="c"># -ge : &gt;= (greater or equal)</span>
</code></pre></div></div>

<h3 id="files-1">files</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># test option file</span>
<span class="c"># options</span>
<span class="c"># -d</span>
<span class="c"># -c (caracter mode)</span>
<span class="c"># -b</span>
<span class="c"># -p</span>
<span class="c"># -r</span>
<span class="c"># -w</span>
<span class="c"># -x</span>
<span class="c"># -s (not empty)</span>
<span class="c"># -e (exist)</span>
<span class="c"># -L (simlink)</span>
<span class="c"># -u (exist + SUID)</span>
<span class="c"># -g (exist + GUID)</span>
</code></pre></div></div>

<h3 id="combinés">combinés</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># -a : and</span>
<span class="c"># -o : or</span>
<span class="c"># ! : non</span>
<span class="c"># \(...\)</span>
<span class="nv">$ </span><span class="nb">test</span> <span class="nt">-d</span> <span class="s2">"rep1"</span> <span class="nt">-a</span> <span class="nt">-w</span> <span class="s2">"rep1"</span> <span class="o">&amp;&amp;</span> ...
</code></pre></div></div>

<hr />
<h1 id="vii---better-syntax">VII - Better syntax</h1>
<hr />
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="c"># test -&gt; [ ... ]</span>
<span class="c"># [[ ... ]] : more rapid, no process, force command interne</span>
<span class="c"># can use &amp;&amp; (-a) and || (-o)</span>
</code></pre></div></div>

<hr />
<h1 id="ix---shell-program">IX - Shell program</h1>
<hr />
<h3 id="if">if</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="o">[</span> <span class="nv">$# </span><span class="nt">-ne</span> 2 <span class="o">]</span>
<span class="k">then
  </span><span class="nb">echo</span> <span class="s2">"Give 2 args please"</span>
  <span class="nb">echo</span> <span class="s2">"Ex: </span><span class="nv">$0</span><span class="s2"> 10 20"</span>
  <span class="nb">exit </span>1
<span class="k">fi

</span><span class="nv">x</span><span class="o">=</span><span class="nv">$1</span>
<span class="nv">y</span><span class="o">=</span><span class="nv">$2</span>

<span class="k">if</span> <span class="o">[</span> <span class="nv">$x</span> <span class="nt">-eq</span> <span class="nv">$y</span> <span class="o">]</span>
<span class="k">then
  </span><span class="nb">echo</span> <span class="s2">"values avec equals"</span>
<span class="k">elif</span> <span class="o">[</span> <span class="nv">$x</span> <span class="nt">-lt</span> <span class="nv">$y</span> <span class="o">]</span>
<span class="k">then
  </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$x</span><span class="s2"> is less than </span><span class="nv">$y</span><span class="s2">"</span>
<span class="k">else
  </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$x</span><span class="s2"> is bigger or equal to </span><span class="nv">$y</span><span class="s2">"</span>
<span class="k">fi</span>

<span class="c"># command</span>
<span class="k">if</span> <span class="o">[[</span> <span class="nv">$?</span> <span class="nt">-eq</span> 0 <span class="o">]]</span>

<span class="c"># C syntax</span>
<span class="k">if</span> <span class="o">((</span> <span class="k">$(</span><span class="nb">command</span><span class="k">)</span> <span class="o">))</span>
</code></pre></div></div>

<h3 id="case">case</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">case</span> <span class="nv">$x</span> <span class="k">in
  </span>1<span class="p">)</span>  <span class="nb">echo</span> <span class="s2">"la premiere valeur est 10"</span> <span class="p">;;</span>
  2<span class="p">)</span>  <span class="nb">echo</span> <span class="s2">"la premiére valeur est 20"</span> <span class="p">;;</span>
  <span class="k">*</span><span class="p">)</span> <span class="nb">echo</span> <span class="s2">"je ne reconnais pas la valeur"</span> <span class="p">;;</span>
<span class="k">esac</span>

<span class="c"># *</span>
<span class="c"># ?</span>
<span class="c"># [...]</span>
<span class="c"># [!...]</span>
<span class="c"># | : logic or</span>
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"Nom: "</span> <span class="p">;</span> <span class="nb">read </span>nom
<span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"Prénom: "</span> <span class="p">;</span> <span class="nb">read </span>prenom
<span class="nb">echo</span> <span class="s2">"Bonjour </span><span class="nv">$prenom</span><span class="s2"> </span><span class="nv">$nom</span><span class="s2"> !"</span>
</code></pre></div></div>

<h3 id="for">for</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for </span>elt <span class="k">in</span> <span class="nv">$@</span>
<span class="k">do
  </span><span class="nb">echo</span> <span class="s2">"je suis dans la boucle </span><span class="nv">$elt</span><span class="s2">"</span>
<span class="k">done

for </span>elt <span class="k">in</span> <span class="k">$(</span><span class="nb">seq </span>3<span class="k">)</span>
<span class="k">do
  </span><span class="nb">echo</span> <span class="s2">"je suis dans la boucle </span><span class="nv">$elt</span><span class="s2">"</span>
<span class="k">done

for</span> <span class="o">((</span> <span class="nv">i</span><span class="o">=</span>1<span class="p">;</span> i&lt;10<span class="p">;</span> i++ <span class="o">))</span>
<span class="k">do
  </span><span class="nb">echo</span> <span class="s2">"je suis dans la boucle </span><span class="nv">$i</span><span class="s2">"</span>
<span class="k">done

for </span>int <span class="k">in</span> <span class="k">$(</span><span class="nb">seq </span>100<span class="k">)</span>
<span class="k">do
  </span><span class="nb">echo</span> <span class="s2">"int: </span><span class="nv">$int</span><span class="s2">"</span>
  <span class="k">if</span> <span class="o">[</span> <span class="nv">$int</span> <span class="nt">-eq</span> 10 <span class="o">]</span>
  <span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"int vaut 10 !!"</span>
    <span class="nb">break</span> <span class="c"># suite apres le premier donne rencontré</span>
    <span class="c"># continue # passe boucle suivante, peut prendre arg</span>
  <span class="k">fi
done</span>
</code></pre></div></div>

<h3 id="while">while</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">debut</span><span class="o">=</span>0
<span class="nb">typeset</span> <span class="nt">-i</span> debut
<span class="nv">fin</span><span class="o">=</span>4
<span class="k">while</span> <span class="o">[</span> <span class="nv">$debut</span> <span class="nt">-ne</span> <span class="nv">$fin</span> <span class="o">]</span>
<span class="k">do
  </span><span class="nb">echo</span> <span class="s2">"les valeurs ne sont pas egales"</span>
  <span class="nb">eval </span><span class="nv">debut</span><span class="o">=</span><span class="nv">$debut</span>+1
<span class="k">done

</span><span class="nb">echo</span> <span class="s2">"Saisisez une commande (&gt; fin pour quitter)"</span>
<span class="k">while </span><span class="nb">true</span> <span class="c"># ou while :</span>
<span class="k">do
    </span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"&gt; "</span> <span class="p">;</span> <span class="nb">read </span>rep
    <span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$rep</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"fin"</span> <span class="o">]</span>
    <span class="k">then
        </span><span class="nb">break
    </span><span class="k">fi
done</span>
</code></pre></div></div>

<h3 id="until">until</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">until</span> <span class="o">[</span> <span class="nv">$debut</span> <span class="nt">-ne</span> <span class="nv">$fin</span> <span class="o">]</span>
<span class="k">do
  </span><span class="nb">echo</span> <span class="s2">"les valeurs ne sont pas"</span>
  <span class="nb">eval </span><span class="nv">debut</span><span class="o">=</span><span class="nv">$debut</span>+1
<span class="k">done</span>
</code></pre></div></div>

<h3 id="select">select</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">PS3</span><span class="o">=</span><span class="s2">"Votre réponse &gt; "</span>
<span class="k">select </span>elt <span class="k">in </span>Bonjour Salut Yolo
<span class="k">do
  case</span> <span class="nv">$elt</span> <span class="k">in</span>
    <span class="s2">"Bonjour"</span><span class="p">)</span> <span class="nb">echo</span> <span class="s2">"Vous avez choisie Bonjour"</span> <span class="p">;</span> <span class="nb">break</span><span class="p">;;</span>
    <span class="s2">"Salut"</span><span class="p">)</span> <span class="nb">echo</span> <span class="s2">"Vous avez choisie Salut"</span> <span class="p">;</span> <span class="nb">break</span><span class="p">;;</span>
    <span class="s2">"Yolo"</span><span class="p">)</span> <span class="nb">echo</span> <span class="s2">"Vous avez choisie Yolo"</span> <span class="p">;</span> <span class="nb">break</span><span class="p">;;</span>
  <span class="k">esac</span>
<span class="k">done</span>
</code></pre></div></div>

<h3 id="functions">functions</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>my_fonction<span class="o">()</span> <span class="o">{</span>
  <span class="nb">echo</span> <span class="s2">"Je suis dans la fonction de </span><span class="nv">$prenom</span><span class="s2"> </span><span class="nv">$nom</span><span class="s2">"</span>
  <span class="k">return </span>0
<span class="o">}</span>

<span class="nv">prenom</span><span class="o">=</span>mourad
<span class="nv">nom</span><span class="o">=</span>allam
ma_fonction <span class="nv">$prenom</span> <span class="nv">$nom</span>

<span class="nb">eval</span> <span class="se">\$</span><span class="nv">$b</span>
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">.</span> mon_fichier.sh

my_function

<span class="nv">a</span><span class="o">=</span>10
<span class="c"># expr prend que des nombres</span>
<span class="nb">expr </span>2 + 3
<span class="nb">expr</span> <span class="nv">$a</span> + 3
<span class="nb">expr</span> <span class="nv">$a</span> <span class="o">!=</span> 3
<span class="nv">a</span><span class="o">=</span><span class="k">$((</span>a <span class="o">+</span> <span class="m">1</span><span class="k">))</span>

<span class="nb">echo</span> <span class="s2">"3/6"</span> | bc <span class="nt">-l</span>

<span class="nv">b</span><span class="o">=</span>20
<span class="nb">eval echo</span> <span class="se">\$</span><span class="nv">$b</span>

signal_recu <span class="o">()</span> <span class="o">{</span>
  <span class="nb">echo</span> <span class="s1">'je viens de recevoir un signal'</span>
<span class="o">}</span>

<span class="nb">trap</span> <span class="s1">'signal_recu'</span> SIGINT

<span class="nb">sleep </span>10

<span class="nv">old_IFS</span><span class="o">=</span><span class="s2">"</span><span class="nv">$IFS</span><span class="s2">"</span>
<span class="nv">IFS</span><span class="o">=</span>:
<span class="nb">echo</span> <span class="s2">"Please input some data separated by colons ..."</span>
<span class="nb">read </span>x y z
<span class="nv">IFS</span><span class="o">=</span><span class="nv">$old_IFS</span>
<span class="nb">echo</span> <span class="s2">"x is </span><span class="nv">$x</span><span class="s2"> y is </span><span class="nv">$y</span><span class="s2"> z is </span><span class="nv">$z</span><span class="s2">"</span>
</code></pre></div></div>
<hr />
<hr />

<hr />
<h1 id="i---répresentation-des-disques">I - Répresentation des disques</h1>
<hr />
<ul>
  <li>disques dans /dev</li>
</ul>

<h3 id="controleur-ide-ancien">controleur IDE (ancien)</h3>
<p>en hdX
hda, hdb, hdc,…</p>

<p>port extension machine = slot PCI
hdX n’existe plus sur dernière version du noyau</p>

<h3 id="controleur-scsi-sata-usb">controleur SCSI, SATA, USB,…</h3>
<p>sdX
sda, sdb, sdc,…
nom suivant ordre detection
CD, DVD, Blueray: srX, sr0, sr1, sr2
aussi en scd0 mais pointe vers sr0</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># affiche périphérique SCSI</span>
<span class="nv">$ </span>lsscsi
</code></pre></div></div>

<h3 id="controleur-spécifique">controleur spécifique</h3>
<p>cXdYpZ
X: slot
Y: disque
Z: partition</p>

<h3 id="virtualisation">virtualisation</h3>
<p>vitual disk
Ex:vda, vdb ou xvda, xvdb</p>

<h1 id="manipulation-de-bas-niveau">Manipulation de bas niveau</h1>
<p>disqueq géré par bibliothéque libata, on peut faire des modifs (p271)</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># SATA, ATA (IDE), SAS</span>
<span class="nv">$ </span>hdparam
<span class="nv">$ </span>hdparam <span class="nt">-I</span> /dev/sda <span class="c"># info depuis noyau</span>
<span class="nv">$ </span>hdparam <span class="nt">-I</span> /dev/sda <span class="c"># info depuis disque</span>

<span class="c"># SCSI</span>
<span class="nv">$ </span>sdparam
</code></pre></div></div>

<h1 id="système-de-fichier">Système de fichier</h1>
<p>on organise le support d’une certaine manière afin de pourvoir y stocker des données
associer nom fichier à son contenu + meta-data
255 caractères max
extension inutile != Windows
type fichier determiné par le premier octet (type MIME)</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># utilise type MIME</span>
<span class="nv">$ </span><span class="nb">type </span>mon_fichier
</code></pre></div></div>

<h1 id="journalisation">Journalisation</h1>
<ul>
  <li>garantir intégrité données</li>
  <li>le FS maintient un journal dans lequel il trace tous les changements intervenus avant de les effectuer réellement et de les pointer une fois terminés</li>
  <li>en cas de coupure, relit journal et rejoue opération si nécessaire</li>
</ul>

<table>
  <thead>
    <tr>
      <th style="text-align: left">file system</th>
      <th style="text-align: left">caractéristiques</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">ext2</code></td>
      <td style="text-align: left">FS historique, non journalisé, rapide, nécessite moins décritures</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">ext3</code></td>
      <td style="text-align: left">ext2 + journal, passage ext2 &lt;-&gt; ext3</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">ext4</code></td>
      <td style="text-align: left">compatible ext3, meilleur allocation, vitesse de vérification rapide</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">btrfs</code></td>
      <td style="text-align: left">à terme nouveau FS de Linux, concurant à xfs, modif volumes à chaud, proche de LVM</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">reiserfs</code></td>
      <td style="text-align: left">1er FS journalisé, performant sur petits fichiers</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">xfs</code></td>
      <td style="text-align: left">journalisation très performante, Red Hat, snapshot, modif volume à chaud</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">vfat</code></td>
      <td style="text-align: left">toute version de FAT, pour petits volumes, simple, cross-platforme</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">exfat</code></td>
      <td style="text-align: left">défaut, pas de notion de droits, fichier max 4Go, remplacé par NTFS</td>
    </tr>
  </tbody>
</table>

<p><code class="highlighter-rouge">exfat</code>: version amélioré de <code class="highlighter-rouge">vfat</code>
<code class="highlighter-rouge">NTFS</code>: pour partager Linux-Windows
<code class="highlighter-rouge">VFAT</code>: bcp de problèmes de brevets</p>

<h1 id="partionnement">Partionnement</h1>
<ul>
  <li>découpage logique du disque, le disque physique, réel, est fractionné en plusieurs disques virtuels, logique, les partitions</li>
  <li>chaque partion est vue comme un disque indépendant avec son propre FS</li>
  <li>2 méthodes de partionnements:
    <ul>
      <li>MBR: machines BIOS</li>
      <li>GPT: machine UEFI (+BIOS)</li>
    </ul>
  </li>
</ul>

<h3 id="mbr">MBR</h3>
<ul>
  <li>position sur 32 bits</li>
  <li>1 block = 512 ko</li>
  <li>2 To max de partition</li>
  <li>le * utilisé mais bascule vers GPT car UEFI</li>
</ul>

<p>MBR - 521 octets
gestionnaire d’amorcage (446 o) | tables des 4 partitions primaires (64 o) | signature (2 o)</p>

<h3 id="partition">partition</h3>
<ul>
  <li>partitions primaires (4 dans MBR)</li>
  <li>partition primaire étendue (1 dans MBR)</li>
  <li>partitions logiques</li>
</ul>

<p>disques IDE: 63 partitions max par disque
disque SCSI: 15 partitions max par disque
partition de 1 à n
n &gt;= 5: partitions logiques
la partition primaire 4 (la dernière) est souvent primaire
1 à 3: primaire
4: étendu
5 à n: logique
<code class="highlighter-rouge">hda1</code>: disque IDE 1, 1ére partition primaire
<code class="highlighter-rouge">hdb5</code>: disque IDE 2, 5ére partition primaire</p>

<h3 id="ebr">EBR</h3>
<ul>
  <li>chaque partition étendue doit décrire les partitions logiques qu’elle contient</li>
  <li>doit disposer d’une table des paritions</li>
  <li>possède 2 enregistrements: 1er: position et taille d’une partition logique
2éme: vide si pas d’autre partition logique, sinon pointe sur autre EBR (liste chainée)</li>
  <li>1 EBR = 1 partition décrite</li>
</ul>

<h3 id="pbr-ou-vbr">PBR ou VBR</h3>
<ul>
  <li>1er secteur de chaque partition primaire ou logique</li>
  <li>peut contenir routine ou chargeur d’amorcage si vocation à petre booté</li>
  <li>quand pas de routine dans MBR, bios cherche dans PBR</li>
</ul>

<h3 id="type-de-partition">type de partition</h3>
<ul>
  <li>en hexa sur 1 octet</li>
  <li>respecter type partition/système de fichier</li>
</ul>

<h1 id="partionnement-gpt">Partionnement GPT</h1>
<ul>
  <li>UEFI remplace BIOS</li>
  <li>GPT remplace MBR</li>
  <li>adressage sur 64 bits</li>
  <li>bloc d’au moins 512 octets</li>
  <li>plus de notion de bloc mais de LBA</li>
  <li>LBA : Logical Block Addressing</li>
  <li>LBA 0: 512 premiers octets</li>
  <li>LBA 1: les 512 suivants</li>
</ul>

<h3 id="guid">GUID</h3>
<ul>
  <li>Global Unique Identifier</li>
  <li>unique 128 bits, ID de composant</li>
  <li>dans GPT, décrit, disque, id de type de partition, id d’une partition</li>
</ul>

<h3 id="lba-0">LBA 0</h3>
<ul>
  <li>conserver rôle de MBR</li>
  <li>protectiver MBR, permet de reconnaitre disque GPT</li>
</ul>

<h3 id="lba-1-lba--1">LBA 1 (LBA -1)</h3>
<ul>
  <li>en-tête GPT
    <ul>
      <li>emplacement et taille du LBA -1</li>
      <li>sommes de contrôles associées</li>
      <li>1ére et derniére adresse utilisable pour partition</li>
      <li>le GUID du disque</li>
      <li>adresse table de partition (LBA 2)</li>
      <li>nb et taille des descripteurs de partitions</li>
      <li>somme de contrôle de la table des partitions</li>
    </ul>
  </li>
</ul>

<h3 id="lba-2-à-33">LBA 2 à 33</h3>
<ul>
  <li>descripteurs de partition (128 octets)</li>
  <li>4 partitions par LBA</li>
  <li>32 LBA -&gt; 128 partitions max</li>
  <li>peut être modifié dans LBA 1</li>
  <li>sauvegarde en LBA -2 à -33</li>
  <li>descripteur de partition
    <ul>
      <li>type GUID de la partition</li>
      <li>GUID de la part.</li>
      <li>LBA de début de la part</li>
      <li>LBA de fin de la partition</li>
      <li>attributs de la partition</li>
      <li>son nom</li>
    </ul>
  </li>
</ul>

<h1 id="manipulation-des-partitions">Manipulation des partitions</h1>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># le plus ancien, le plus utilisé (menu), pour MBR</span>
<span class="nv">$ </span>fdisk

<span class="c"># dérivé de fdisk</span>
<span class="nv">$ </span>cfdisk

<span class="c"># compliqué mais précis</span>
<span class="nv">$ </span>sfdisk

<span class="c"># opérations avancées, scriptable</span>
<span class="nv">$ </span>parted

<span class="c"># equivalent fdisk pour GPT</span>
<span class="nv">$ </span>gdisk
</code></pre></div></div>

<h3 id="manipulation-partition-mbr">manipulation partition MBR</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>fdisk <span class="nt">-l</span>
<span class="nv">$ </span>fdisk <span class="nt">-l</span> /dev/sda

<span class="c"># "p" pour print les partions</span>
<span class="c"># "d" supprimer partition</span>
<span class="c"># "n" créer partition</span>
<span class="c"># "p" ou "e", primary ou extended</span>
<span class="c"># choisir début de la partition</span>
<span class="c"># +1024M ou + 64G</span>
<span class="c"># "p" pour voir état</span>
<span class="c"># "w" sauvegarder</span>
<span class="c"># message d'avertissement normal</span>
<span class="c"># forcer synchro: blockdev --rereadpt /dev/sdb pour relire la table de partition</span>
<span class="c"># ou si parted est installé et blockdev ne fonctionne pas: partprobe /dev/sdb</span>
<span class="c"># cat /proc/partitions | grep sdb -&gt; pour voir partitions</span>
<span class="c"># on peut maintenant utiliser la partition et y ajouter un FS</span>
<span class="c"># modifier type partition</span>
<span class="nv">$ </span>fdisk
<span class="c"># "t"</span>
<span class="c"># "numéro partition"</span>
<span class="c"># "L"</span>
<span class="c"># "w"</span>
<span class="c"># types les + utilisés: 83: type Linux</span>
<span class="c"># 82: swap</span>
<span class="c"># fd: type RAID</span>
<span class="c"># 8e: type LVM</span>
</code></pre></div></div>

<h3 id="manipulation-parition-gpt">manipulation parition GPT</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>gdisk /dev/sdb
<span class="c"># pas de notion de partition primaire ou étendue</span>
<span class="c"># parition 1 à 128</span>
<span class="c"># même fonctionnement que fdisk</span>
<span class="c"># type avec 0 à la fin</span>
<span class="c"># dangereux d'utiliser gdisk sur un disque MBR</span>
</code></pre></div></div>

<h1 id="manipuler-les-fs">Manipuler les FS</h1>
<h3 id="block">block</h3>
<p>unité de base, atomique, fichier = nb de blocks
du, df, find utilise unité block
512 ou 1024 octets</p>

<h3 id="superblock">superblock</h3>
<p>chaque FS à au moins 1 superblock
contient: type, taille, etat, info sur partitions, autre superblocks
existe plusieurs copies de ses super blocks</p>

<h3 id="tabke-dinodes">tabke d’inodes</h3>
<p>index node, noeud d’index, strcuture de données, representant un fichier
tous les inodes sont dans plusieurs tables d’inodes
1 fichier = 1 seul node
1 node = unique dans le FS
contenu: toutes les info d’un fichier, ne contient pas le nom du fichier, ni date de création (existe exception)
$ stat chap1.pdf
adresse dans inode: soit vers début données du fichier, soit vers block d’adresses, et ainsi de suite</p>

<h3 id="table-de-catalogues">table de catalogues</h3>
<p>|nom fichier       |inode     | 
|:—————–|:———|
|<code class="highlighter-rouge">mon_fichier.txt</code> |172781289 |
|<code class="highlighter-rouge">centos7.iso</code>     |211112999 |</p>

<p>possible de donner plusieurs nom à un même fichier</p>

<h3 id="hard-link">hard link</h3>
<p>reférence sur inode
limté dans le FS
ls -l -&gt; 1: normal
si &gt; 1 alors existe d’autre liens</p>

<h1 id="créer-système-de-fichier">Créer système de fichier</h1>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># permet de trouver la commande associée</span>
<span class="nv">$ </span>mkfs <span class="nt">-f</span> typefs options periph
<span class="c"># indiquer options après le typefs</span>
<span class="c"># on peut directement appelé la vrai commande</span>
<span class="c"># ext2 -&gt; mkfs.ext2</span>

<span class="nv">$ </span>mkfs <span class="nt">-t</span> ext2 /dev/sdb1
<span class="c"># on peut définir les options</span>
<span class="c"># -b taille block, multiple de 512</span>
<span class="c"># -c vérifier les mauvais blocks avant de créer le FS (execute badblock)</span>
<span class="c"># -i ration octets/inodes</span>
<span class="c"># -m pourcentage pour root</span>
<span class="c"># -L label de la partition</span>
<span class="c"># -j créer journal pour ext3</span>

<span class="nv">$ </span>mkfs <span class="nt">-t</span> ext2 <span class="nt">-j</span> <span class="nt">-b</span> 2048 <span class="nt">-i</span> 16384 <span class="nt">-m</span> 0 <span class="nt">-L</span> <span class="s2">"DATA"</span> /dev/sdb1

<span class="c"># ext2 -&gt; ext3</span>
<span class="nv">$ </span>tune2fs <span class="nt">-j</span> /dev/sdb1

<span class="c"># ext3 -&gt; ext2</span>
<span class="nv">$ </span>tune2fs <span class="nt">-O</span> ^has_journal /dev/sdb1
<span class="c"># vérification fsck et supprime .journal</span>

<span class="c"># ext3 -&gt; ext4</span>
<span class="nv">$ </span>tune2fs <span class="nt">-O</span> extends,uninit_bg,dir_index /dev/sdb1
<span class="nv">$ </span>fsck <span class="nt">-pDF</span> /dev/sdb1
<span class="nv">$ </span>mount /dev/sdb1 /mnt
<span class="c"># ajouter extends aux fichiers déjà existant</span>
<span class="nv">$ </span>find /mnt <span class="nt">-xdev</span> <span class="nt">-type</span> f <span class="nt">-exec</span> chattr +e <span class="o">{}</span> <span class="se">\;</span>
<span class="c"># même chose avec -type d</span>

<span class="c"># ext4 -&gt; ext3</span>
<span class="c"># si pas encore d\'extend: le monter en ext3</span>
<span class="c"># sinon pas possible</span>

<span class="c"># label</span>
<span class="c"># afficher</span>
<span class="nv">$ </span>e2label /dev/sdb1
<span class="c"># modifier</span>
<span class="nv">$ </span>e2label /dev/sdb1 DATA <span class="c"># max 16 caractères sinon tronqué</span>

<span class="c"># ReiserFS, xfs, btrfs, vfat</span>
<span class="c"># voir les options associées</span>

<span class="c"># les mtools: outils pour travailler sur FS FAT ou VFAT</span>
</code></pre></div></div>

<h1 id="accéder-au-système-de-fichier">Accéder au système de fichier</h1>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># accéder aux partitions qui ont un FS</span>
<span class="c"># info sur tous les montages actifs (aussi dans /etc/mtab)</span>
<span class="nv">$ </span>mount

<span class="nv">$ </span>mount <span class="nt">-t</span> typefs <span class="nt">-o</span> options periph point_montage
<span class="nv">$ </span>mount <span class="nt">-t</span> ext4 /dev/sdb1 /mnt/DATA

<span class="c"># par label -&gt; mieux !</span>
<span class="nv">$ </span>mount <span class="nt">-t</span> ext4 <span class="nt">-L</span> DATA /mnt/DATA
<span class="c"># dans /dev/disk/by-label</span>

<span class="c"># par UUID de partition</span>
<span class="c"># udev avec vol_id dans /lib/udev/vol_id</span>
<span class="nv">$ </span>./vol_id <span class="nt">-u</span> /dev/sdb1

<span class="c"># maintenant</span>
<span class="nv">$ </span>blkid /dev/sdb1
<span class="nv">$ </span>blkid <span class="nt">-o</span> value <span class="nt">-sUUID</span>

<span class="c"># si FS est ext2 ou 3</span>
<span class="nv">$ </span>/dev/disk/by-uuid

<span class="nv">$ </span>mount <span class="nt">-t</span> ext4 <span class="nt">-U</span> 98766 /mnt/DATA

<span class="c"># remonter FS avprès modifs</span>
<span class="nv">$ </span>mount <span class="nt">-o</span> ro,remount /mnt/DATA

<span class="c"># options de montage </span>
<span class="c"># p 311</span>
</code></pre></div></div>

<h3 id="détacher-point-de-montage">détacher point de montage</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ne doit plus être utilisé</span>
<span class="nv">$ </span>umount /mnt/DATA

<span class="c"># connaitre utilisateurs</span>
<span class="nv">$ </span>lsof /mnt/DATA

<span class="c"># forcer</span>
<span class="nv">$ </span>fuser <span class="nt">-km</span> /mnt/DATA

<span class="c"># conf statique des montages, lu à chaque démarrage</span>
/etc/fstab
periph | p_montage | typefs | options | dump | fsck

<span class="c"># montage automatique sauf si option noauto</span>

<span class="c"># montage manuel</span>
<span class="c"># recherche automatique dans fstab</span>
<span class="nv">$ </span>mount /home
<span class="nv">$ </span>mount <span class="nt">-L</span> u01
mount <span class="nv">LABEL</span><span class="o">=</span>/boot
mount /dev/sda5

<span class="c"># tout monter</span>
<span class="nv">$ </span>mount <span class="nt">-a</span>
</code></pre></div></div>

<h1 id="controler-le-système-de-fichiers">Controler le système de fichiers</h1>

<h3 id="statistiques-doccupation">statistiques d’occupation</h3>
<p>par système de fichier</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># info sur fs montés</span>
<span class="nv">$ </span><span class="nb">df</span>

<span class="c"># info sur le fs</span>
<span class="nv">$ </span><span class="nb">df </span>sys_fichier ou point_montage

<span class="c"># info sur le fs qui le contient</span>
<span class="nv">$ </span><span class="nb">df </span>fichier.txt
<span class="c"># k, m</span>
<span class="c"># -T: affiche type de fs</span>
<span class="c"># -i: stats sur inodes </span>
</code></pre></div></div>

<p>par arborescence</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># disque usage, espace occupé par arborescence</span>
<span class="c"># dossier + contenu</span>
<span class="nv">$ </span><span class="nb">du</span>

<span class="c"># taille totale seulement</span>
<span class="nv">$ </span><span class="nb">du</span> <span class="nt">-s</span> /home

<span class="c"># par défaut visite autres FS</span>
<span class="nv">$ </span><span class="nb">du</span> <span class="nt">-x</span> /home
</code></pre></div></div>

<h3 id="vérifier-régler-et-réparer">vérifier, régler et réparer</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># vérifier réparer FS, ne doit pas être monté ou ro</span>
<span class="nv">$ </span>fsck

<span class="c"># comme mkfs, appelle d'autres commandes, fsck.ext2, fsck.ext3</span>
<span class="c"># si pas de type, devine</span>
<span class="nv">$ </span>fsck <span class="nt">-t</span> typefs periph

<span class="c"># forcer et verbeux</span>
<span class="nv">$ </span>fsck <span class="nt">-fV</span> /dev/sda2

<span class="c"># si il faut réparation</span>
<span class="c"># -p: automatique</span>
<span class="c"># -y: répondre oui à toutes les questions</span>

<span class="c"># existe vérification automatique, interval peut</span>
<span class="c"># être modifié avec tune2fs</span>

<span class="c"># BTRFS</span>
<span class="nv">$ </span>btrfsck
<span class="nv">$ </span>btrfscheck

<span class="c"># vérifier blocs déféctueux</span>
<span class="c"># appelé par mkfs ou fsck avec -c</span>
<span class="nv">$ </span>badblocks
<span class="c"># -n: non déstructuf, lit et réécrit</span>
<span class="c"># -w: destructuf avec modif</span>
<span class="c"># éxecution très longue, pas de sens sur SSD</span>

<span class="c"># donne info, utile avec grep, ext2,3,4</span>
<span class="nv">$ </span>dump2fs

<span class="c"># modif paramètres en ext2,3</span>
<span class="nv">$ </span>tune2fs

<span class="c"># pour ext2,3,4</span>
<span class="nv">$ </span>debugfs
</code></pre></div></div>

<h3 id="xfs">XFS</h3>
<p>par défaut dans RHEL, CentOS</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># étendre parttion</span>
<span class="nv">$ </span>xfs_growfs

<span class="c"># peut être agrandi, mais pas rétrécit</span>
<span class="c"># nbr d'inodes non limités en xfs</span>

<span class="c"># equivalent de fsck</span>
<span class="nv">$ </span>xfs_repair

<span class="c"># affiche journal, log</span>
<span class="nv">$ </span>xfs_logprint

<span class="c"># debugfs et tune2fs</span>
<span class="nv">$ </span>xfs_db et xfs_admin
</code></pre></div></div>

<h1 id="le-swap">le swap</h1>
<p>théorie: 32 bits, process peut addresser à 4 Go d’espace mémoire (virtuelle) rien que pour lui, si dépasse, utilise le swap</p>

<h3 id="taille-optimale">taille optimale</h3>
<p>RAM | SWAP
&lt;512 Mo | 2*RAM
1 Go à 4 Go | taille RAM
+4 Go | 4 Go, plus ou moins
256 Go | non 256 Go</p>

<h3 id="créer-partitions-swap">créer partitions swap</h3>
<p>fdisk ou gdisk
synchroniser table de partitions:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>partprobe

<span class="c"># préparer partitions à recevoir swap</span>
<span class="nv">$ </span>mkswap /dev/sda5

<span class="c"># si swap &gt; 2Go, alors plusieurs partitions de swap sur le plusieurs disques sur plusieurs controleurs materielle différent</span>
</code></pre></div></div>

<h3 id="activer-désactiver-swap">activer, désactiver swap</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># activer</span>
<span class="nv">$ </span>swapon /dev/sda5
<span class="c"># -p: priorité,de 0 à 32767</span>
<span class="c"># varier si disque plus rapide qu'un autre</span>

<span class="c"># activer toute parition de swap sans noauto</span>
<span class="nv">$ </span>swapon <span class="nt">-a</span>

<span class="c"># désactiver</span>
<span class="c"># s'assurer d'avoir de la place en RAM</span>
<span class="nv">$ </span>swapoff /dev/sda5
<span class="c"># /proc/swaps: zones swap actives</span>

<span class="c"># desactiver toutes les partitions de swap</span>
<span class="nv">$ </span>swapoff <span class="nt">-a</span>

<span class="c"># en cas d'urgence, fichier de swap, p330</span>
</code></pre></div></div>

<h3 id="etat-de-la-mémoire">etat de la mémoire</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># info sur RAM</span>
<span class="nv">$ </span>free

<span class="c"># FS virtuel</span>
<span class="c"># /proc</span>
<span class="c"># /proc/meminfo</span>

<span class="c"># vider cache</span>
<span class="nv">$ </span><span class="nb">sync</span> <span class="p">;</span> <span class="nb">echo </span>3 <span class="o">&gt;</span>/proc/sys/run/drop_caches
<span class="nv">$ </span>swapoff <span class="nt">-a</span>
<span class="nv">$ </span>swapon <span class="nt">-a</span>
<span class="nv">$ </span>free
</code></pre></div></div>

<h3 id="quotas-disque">quotas disque</h3>
<p>p336</p>

<h1 id="droits-daccés">Droits d’accés</h1>
<p>UID: user id
/etc/passwd: les users
GID: group ID
user avec group principal
/etc/group
$ id
fichier lié à UID et GID</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># modifier droits</span>
<span class="nv">$ </span><span class="nb">chmod</span> <span class="nt">-R</span>
<span class="c"># u,g,o</span>
<span class="c"># +,-,=</span>
<span class="c"># r,w,x</span>
<span class="c"># 4,2,1 # base 8</span>

<span class="c"># droits de base fichier: 644</span>
<span class="c"># droits de base dossier: 755</span>

<span class="c"># ce que l'on retire de fichier: 666, dossier: 777</span>
<span class="nv">$ </span><span class="nb">umask</span>

<span class="c"># changer proprio</span>
<span class="nv">$ </span><span class="nb">chown</span>

<span class="c"># changer groupe</span>
<span class="nv">$ </span><span class="nb">chgrp</span>

<span class="c"># droits d'accés étendus</span>
<span class="c"># executer commande avec droits sur proprio, ou groupe</span>
<span class="c"># SUID et SGID</span>
<span class="nv">$ </span><span class="nb">chmod </span>u+s ou g+s
<span class="c"># 4000 ou 2000</span>

<span class="c"># UID et GID reel: celui qui lance vraiment</span>
<span class="c"># UID et GID effectif: celui deu process (si SUID ou SGID)</span>
<span class="c"># SUID et SGID non transmis au fils</span>

<span class="c"># sticky bit (bit collant)</span>
<span class="c"># protection contre affacement</span>
<span class="nv">$ </span><span class="nb">chmod </span>u+t /tmp
<span class="c"># 1000</span>

<span class="c"># repertoire</span>
<span class="c"># si s au groupe, tout ce qui va être crée dedant partage le groupe du repertoire </span>
</code></pre></div></div>

<hr />
<hr />

<h1 id="processus-de-démarrage">Processus de démarrage</h1>

<h1 id="bios-et-uefi">BIOS et UEFI</h1>
<ul>
  <li>BIOS: Basic Input Output System</li>
  <li>interface logicielle entre matériel et logiciel à niveau très basique</li>
  <li>auto-test (POST) au démarrage pour détecter périphériques (dont celui pour démarrer)</li>
  <li>mémoire CMOS: alimentée par petite pile avec info materilles</li>
  <li>
    <p>lit est éxecute 1er secteur d’amorçage (MBR ou PBR)</p>
  </li>
  <li>UEFI: Unifed Extensible Firmware Interface</li>
  <li>seccesseur du BIOS</li>
  <li>interface entre firmware (micrologiciel) du matériel et l’OS</li>
  <li>amorçer OS via boot manager</li>
  <li>contrairement au BIOS, chercge tout le nécessaire pour lancer lui-même l’OS</li>
</ul>

<h1 id="grub">GRUB</h1>
<ul>
  <li>Grand Unified Bootloader</li>
  <li>chargeur par défaut</li>
  <li>options:
    <ul>
      <li>timeout: nb sec pour choisir</li>
      <li>default n: preselection</li>
      <li>title xxx: debut section, ligne menu</li>
      <li>root(hdX,y), tous les accés fichiers en dessous sont depuis ce point
(hd0,O): 1ère partition du 1er disque
(fd0): 1er lecteur de disquette detecté BIOS
(hd1,4): 5éme partition du second disque</li>
      <li>kernel: nom de l’image du noyau suivi des param</li>
      <li>initrd: initial ramdisk</li>
      <li>rootnoverify: racine à ne pas monter par GRUB</li>
      <li>chainloader + 1: démarre le 1er secteur de la racine spécifiée ci-dessus</li>
    </ul>
  </li>
</ul>

<h3 id="installation">installation</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># conf</span>
<span class="nv">$ </span><span class="nb">cat</span> /etc/grub.conf
<span class="nv">$ </span><span class="nb">cat</span> /boot/grub/menu.lst

<span class="c"># peut s'installe sur MBR ou PBR</span>
<span class="nv">$ </span>/sbin/grub-install /dev/sda
</code></pre></div></div>

<h3 id="démarrage">démarrage</h3>
<p>choisir image au boot
<code class="highlighter-rouge">e</code> pour éditer param passés au noyau
<code class="highlighter-rouge">e</code>: editer ligner
<code class="highlighter-rouge">d</code>: supprimer ligne
<code class="highlighter-rouge">o</code>: ajouter ligne
<code class="highlighter-rouge">b</code>: booter</p>

<h1 id="grub-2">GRUB 2</h1>
<ul>
  <li>réécriture complète de GRUB
```bash
    <h1 id="de-grub-à-grub2">de GRUB à GRUB2</h1>
    <p>$ upgrade-from-grub-legacy</p>
  </li>
</ul>

<h1 id="modules-en-mod">modules en .mod</h1>

<h1 id="config-menu">config menu</h1>
<p>$ cat /boot/grub[2]/menu.cfg</p>
<h1 id="mais-pas-touché-car-généré-automatique-par">mais pas touché car généré automatique par</h1>
<h1 id="utiliser-à-chauqe-ajout-de-noyaux-ou-script">utiliser à chauqe ajout de noyaux ou script</h1>
<p>$ update-grub
$ grub2-mkconfig -o /boot/grub/menu.cfg</p>

<h1 id="fichiers-lus">fichiers lus</h1>
<p>$ /boot/grub/device.map # correspondance nom disque Linux et GRUB
$ /etc/default/grub # param par défaut de GRUB
$ /etc/grub.d/* # par ordre de listage qui génére les menus</p>

<h1 id="ordre">ordre</h1>
<p>$ 10_linux # cherche noyaus
$ 30_os_prober # cherche autres OS sur le disque</p>

<h1 id="générer-devicemap">générer device.map</h1>
<p>$ grub-mkdevicemap</p>
<h1 id="sinon">sinon</h1>
<p>$ grub2-install –recheck</p>

<h1 id="variables-de-grub2--options-p355">variables de GRUB2 + options (p355)</h1>
<p>$ /etc/default/grub</p>

<h1 id="trouver-os-sur-disque">trouver OS sur disque</h1>
<p>$ $ os-prober</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### ordre
* traces noyau dans /var/log/dmesg
* matériel detecté et initialisé
* initrd est chargé + modules
* noyau monte le FS racine en read only
* crée première console
* 1er process est lancé (init)

* autre chargeur: LILO (Linux Loader) mais disparait

# Init Sytem V
### rôle
* programme init
* 1er lancé et dernier stoppé
* lance toutes les autres tâches
* pére de tous les process
* PID = 1
* lancé par noyau (PID = 0, virtuel)
* conf: /etc/inittab

### runlevels
* 0: halt, stoppe l'OS et machine
* 1: mono-utilisateur, maintenance en mode console
* 2: multi-user, sans réseau console
* 3: précedent + réseau
* 4: précedent + selon admin
* 5: avec réseau + X window
* 6: reboot
S,s: single, user mode
dans /etc/inittab: id:5:initdefault

dans /etc/inittab
id:[niv]:action:commande
id: identifiant de la ligne
niv: liste des runlevels sans séparateurs
action: type d'action à effectuer (p361)
commande: commande à éxecuter

### changement de runlevel
```bash
$ /sbin/init

$/sbin/telinit 5
# -q: relit /etc/inittab
# -U: init se lance sans relir inittab et sans changer niveau
# -t

# donne niveai d'éxecution
$ runlevel
# precedent actuel
</code></pre></div></div>

<h3 id="paramétrage-système-de-base">paramétrage système de base</h3>
<p>quelques soit le runlevel, init lance toujours la commande associée aux actions:
sysinit, bootwait ou boot
RH: si::sysinit:/etc/rc.d/rc.sysinit
OpenSUSE: si::bootwait:/etc/init.d/boot
Debian: si::sysinit:/etc/init.d/rcS</p>

<h3 id="niveaux-déxecution">niveaux d’éxecution</h3>
<p>/etc/init.d/rc prend runlevel en param et s’occupe de tout</p>

<h3 id="gestion-des-niveaux-et-services">gestion des niveaux et services</h3>
<ul>
  <li>runlevel défnit les services à démarrer</li>
  <li>script rc qui les charge</li>
  <li>services controlés par: start, stop, reload, status avec les scripts dans /etc/init.d/</li>
  <li>pour chaque runlevel, existe répertoire rcN.d qui contient liens symb vers les services presents dans /etc/init.d</li>
</ul>

<p>RH: /etc/rc.d/rcN.d et liens sur /etc/rcN.d
OpenSUSE: /etc/init.d/rcN.d sachant que /etc/rc.d pointe sur /etc/init.d
Debian: /etc/rcN.d</p>

<p>Les liens sont présents dans les rcN.d ont des noms particuliers
[SK]NNservice
S: start
K: kill
NN: ordre démarrapge/arrêt (00: premier, 99: dernier)
service: nom du service</p>

<p>Quand on execute rc, il liste tout les services à stopper et les stoppes, ensuite tout ceux à démarrer et les start.</p>

<h3 id="contrôle-manuel-des-services">contrôle manuel des services</h3>
<p>utiliser les scripts de /etc/init.d/*</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>/etc/init.d/ssdd start
<span class="c"># stop</span>
<span class="c"># probe: faut-il reload apres modif de la conf ?</span>
<span class="c"># reload, forcereload</span>
<span class="c"># restart</span>
<span class="c"># try-restart: restart SSI arrêt à bien fonctionner</span>

<span class="c"># via commande service</span>
<span class="nv">$ </span>service sshd stop
<span class="c"># conseiller d'utiliser ce system, que d'appeler directement les scripts</span>
</code></pre></div></div>

<h1 id="modification-des-niveaux-déxecution">Modification des niveaux d’éxecution</h1>
<p>RH, SUSE</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ajouter, supprimer, activer, désactiver des services par niveau d'éxecution</span>
<span class="nv">$ </span>chkconfig
<span class="c"># --list [service]: affiche [toute] la conf</span>
<span class="c"># --add service</span>
<span class="c"># --del service</span>
<span class="c"># --level xxx service on/off: activer pour level</span>
<span class="nv">$ </span>chkconfig <span class="nt">--level</span> 35 smb on
</code></pre></div></div>

<p>Debian</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># crée des liens dans les rcN.d</span>
<span class="nv">$ </span>update-rc.d

<span class="c"># ajoute service avec param par défaut: start en 2 et 5</span>
<span class="c"># stop en 0,1,6</span>
<span class="c"># en position 20</span>
<span class="nv">$ </span>update-rc.d ssh defaults

<span class="nv">$ </span>update-rc.d ssh start 10 3 4 5 <span class="nb">.</span> stop 05 0 1 6

<span class="c"># supprimer</span>
<span class="nv">$ </span>update-rec.d <span class="nt">-f</span> ssh remove
</code></pre></div></div>

<h3 id="console-virtuelle">console virtuelle</h3>
<p>défini dans /etc/inittab
dispo dans /dev/ttyN
N: num de consol
depuis console: Alt + Fn
depuis X: Ctrl + Alt + Fn
Alt + -&gt; ou Alt + &lt;-
6 dispo par défaut
x window est lancé par défaut sur la premiére dispo (la 7)</p>

<h3 id="login">login</h3>
<ul>
  <li>terminaux lancés par init</li>
  <li>prompt attend saisie du nom</li>
  <li>affiche /etc/issue</li>
  <li>validation</li>
  <li>execution de la commande login</li>
  <li>qui attend mdp</li>
  <li>si mdp ok, affiche /etc/motd</li>
  <li>execute shell de /etc/passwd</li>
</ul>

<p>pas de fork mais substitution (exec), init sait facilement qu’une connexion est terminée</p>

<h3 id="arrêt">arrêt</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>init 0
<span class="nv">$ </span>init 6
<span class="c"># mais pas supe</span>

<span class="c"># appel init</span>
<span class="nv">$ </span>shutdown
<span class="c"># -k: envoi juste message à tout le monde</span>
<span class="c"># -r: reboot</span>
<span class="c"># -h: halt</span>
<span class="c"># -f: enpêche fsck au boot</span>
<span class="c"># -F: force fsck</span>
<span class="c"># -c: annule le shutdown sans délai</span>

<span class="nv">$ </span>shutdown <span class="nt">-r</span> +10 <span class="s2">"Reboot dans 10 min"</span>
<span class="nv">$ </span>shutdown <span class="nt">-c</span> <span class="s2">"Maintenance annulée"</span>

<span class="nv">$ </span>halt <span class="c"># = shutdown -h</span>
<span class="nv">$ </span>reboot <span class="c"># = shutdown -r</span>
</code></pre></div></div>

<h3 id="systemd">systemd</h3>
<ul>
  <li>system deamon</li>
  <li>système d’initialisation</li>
  <li>lance processus au démarrage</li>
  <li>les gérer tout au long de leur exécution</li>
  <li>conçu pour tourner avec le noyau Linux</li>
</ul>

<h3 id="processus-systemd">Processus systemd</h3>
<ul>
  <li>premier processus lancé</li>
  <li>dernier à s’arrêter</li>
  <li>PID 1</li>
  <li>PPID 0 (noyau)</li>
</ul>

<h3 id="histoire">Histoire</h3>
<ul>
  <li>successeur d’init System V, (<code class="highlighter-rouge">init</code>)</li>
  <li>successeur  d’<code class="highlighter-rouge">upstart</code> » (développé par Canonical (Ubuntu))</li>
  <li>systemd est réputé pour être plus performant que ces derniers</li>
</ul>

<p>systemd manipule des <code class="highlighter-rouge">units</code> qui sont de différents types:</p>
<ul>
  <li>cibles ou <code class="highlighter-rouge">targets</code></li>
  <li><code class="highlighter-rouge">services</code></li>
</ul>

<p>Les <code class="highlighter-rouge">units</code> sont dans <code class="highlighter-rouge">/lib/systemd/system/*</code> sous forme de fichiers.</p>

<p>Dans <code class="highlighter-rouge">systemd</code>, il n’y a plus réellement de notions de « <code class="highlighter-rouge">runlevels</code> », ou niveaux d’exécutions, initialement présent dans init System V. Ces niveaux sont remplacés par des <code class="highlighter-rouge">tagets</code>. On peut encore trouver des traces de <code class="highlighter-rouge">runlevels</code>, mais sont souvent utilisées pour assurer une retro compatibilité avec « <code class="highlighter-rouge">init</code> ». Systemd est complètement compatible avec <code class="highlighter-rouge">init</code>, mais l’inverse n’est pas vrai.</p>

<p>Voici les correspondances entre les runlevels et les targets de <code class="highlighter-rouge">systemd</code> :</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">init (runlevel)</th>
      <th style="text-align: left">systemd</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">0</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">poweroff.target</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">1</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">rescue.target</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">2/3/4</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">multi-user.target</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">5</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">graphical.target</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">6</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">reboot.target</code></td>
    </tr>
  </tbody>
</table>

<p>Pour connaitre le runlevel d’une machine: <code class="highlighter-rouge">$ systemctl get-default</code></p>

<p>On remarquera que la cible « <code class="highlighter-rouge">default.target</code> » qui se trouve dans <code class="highlighter-rouge">/lib/systemd/system/*</code> est un lien symbolique qui pointe vers le « <code class="highlighter-rouge">.target</code> » du runlevel actuel.</p>

<p>Changer runlevel : <code class="highlighter-rouge">$ systemctl set-default multi-user.target</code>. Ce qui aura pour effet de simplement modifier le lien symbolique de default.target.</p>

<p>Appliquer la nouvelle cible à l’exécution courante: <code class="highlighter-rouge">$ systemctl isolate multi-user.target</code></p>

<p>Requires: dépendances obligatoires
After: exemple d’ordre</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># lister les cibles ou services actifs</span>
<span class="nv">$ </span>systemctl list-units -–type target
<span class="nv">$ </span>systemctl list-units –-type service

<span class="c"># afficher toutes les cibles ou services</span>
<span class="nv">$ </span>systemctl list-units -–type target –all
<span class="nv">$ </span>systemctl list-units –-type service –all

<span class="c"># afficher une liste complète</span>
<span class="nv">$ </span>systemctl list-unit-fils –-type target/service
<span class="nv">$ </span>systemctl list-unit-fils –-type service

<span class="c"># gérer un service</span>
<span class="nv">$ </span>systemctl status sshd
<span class="nv">$ </span>systemctl start sshd
<span class="nv">$ </span>systemctl stop sshd
<span class="nv">$ </span>systemctl reload sshd
<span class="nv">$ </span>systemctl <span class="nb">enable </span>sshd
<span class="nv">$ </span>systemctl disable sshd
<span class="nv">$ </span>systemctl is-enabled sshd

<span class="c"># afficher les dépendances d’une unité</span>
<span class="nv">$ </span>systemctl list-dependencies –-before ssh
<span class="nv">$ </span>systemctl list-dependencies –-after ssh

<span class="c"># gérer la machine</span>
<span class="nv">$ </span>systemctl halt
<span class="nv">$ </span>systemctl poweroff
<span class="nv">$ </span>systemctl reboot
<span class="nv">$ </span>systemctl shutdown

<span class="c"># Masquage</span>
<span class="c"># un service désactivé (disabled) et stoppé, peut tout de même tourner car il peut être issu d’une dépendance. On peut interdire ce comportement avec :</span>
<span class="nv">$ </span>systemctl mask sshd
<span class="nv">$ </span>systemctl unmask sshd

Remarque : l<span class="s1">'activation d'</span>un service ajoute un lien vers l’unité active vers le <span class="sb">`</span>.taget.want/<span class="sb">`</span> actuel.

<span class="c">### upstart</span>
<span class="sb">```</span>bash
remplace init par ubuntu, système d<span class="se">\'</span>évenements
conf /etc/init, syntax spécifique + code shell
<span class="nv">$ </span>start, stop, restart, status ssh

<span class="c"># controler services</span>
<span class="nv">$ </span>initctl list
<span class="nv">$ </span>initctl emit runlevel
</code></pre></div></div>

<h1 id="consulter-les-traces-système">Consulter les traces système</h1>

<h3 id="dmesg">dmesg</h3>
<p>$ dmesg -T: affiche temps
$ dmesg -k: -lwarn,err</p>

<h3 id="varlogmessages-et-varlogsyslog">/var/log/messages et /var/log/syslog</h3>
<p>kernel + services geré par syslog</p>

<h3 id="journalctl">journalctl</h3>
<p>$ journalctl -k -p warning,emerge
$ journal -k = dmesg</p>

<h1 id="serice-et-modules-noyau">Serice et modules noyau</h1>
<h3 id="présentation">présentation</h3>
<p>noyau linux (linus T) + outils GNU
noyau  monolithique: fonctionnalités et composants sont regroupés dans programme unique
depuis v 2.0 devenu modulaire
kernel dans /boot
vmlinuz-X.Y.Z.p-Vtxt
uname -r</p>

<h3 id="uname">uname</h3>
<p>unix name</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">uname</span>
<span class="c"># -m: machine type materiel</span>
<span class="c"># -n: nodename: hostname</span>
<span class="c"># -r: release, num noyau</span>
<span class="c"># -s: system name, nom OS</span>
<span class="c"># -p, processor, type processor</span>
<span class="c"># -i: plate forme materiel</span>
<span class="c"># -v: versio</span>
<span class="c"># -a: all</span>
</code></pre></div></div>

<h3 id="gestions-des-modules">gestions des modules</h3>
<p>dans /lib/modules/$(uname -r)
fichiers en .ko (kernel object)</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># tous les mod avec leur dépendances</span>
<span class="nv">$ </span>lsmod
<span class="c"># nom taille nb_utilisateurs depandances</span>
<span class="c"># affiche cotenu de /proc/modules</span>

<span class="c"># màj arbre de dépendances</span>
<span class="c"># en modifiant /lib/modules/$(uname -r)/modules.dep</span>
<span class="nv">$ </span>depmod

<span class="c"># aprés installation de mudoles</span>
<span class="nv">$ </span>depmod <span class="nt">-a</span>

<span class="c"># info</span>
<span class="nv">$ </span>modinfo <span class="o">[</span>parpot]

<span class="c"># alias pour connaitre les périph qu'il doit gérer</span>
<span class="c"># les param sont passés au modulle via les commandes insmode ou modprobe à l'aide du fichier /etc/modprobe.conf ou dans le .d/*</span>

<span class="c"># charge module mais ne s'occupe pas des dépendances</span>
<span class="nv">$ </span>insmod lp.ko
<span class="c"># -k: autoclean des modules non utilisés</span>

<span class="c"># avec param</span>
<span class="nv">$ </span>insmod wcvideo.ko <span class="nv">trace</span><span class="o">=</span>5

<span class="c"># decharger module, ne gére pas les dépendances</span>
<span class="nv">$ </span>rmmode perpot

<span class="c"># charge module + toutes ses dépendances</span>
<span class="c"># avec param dans /etc/modprobe.conf</span>
<span class="c"># ou /etc/modprobe.d/*</span>
<span class="nv">$ </span>modprob
<span class="c"># -r: decharge + dépendances si pas utilisées</span>

<span class="c"># confi toujour dans le .d en /etc/modprobe.d/*.conf</span>
<span class="c"># système d'aliases</span>
</code></pre></div></div>

<h1 id="chargement-des-modules-au-boot">Chargement des modules au boot</h1>
<p>initial ramdisk
initrd: permet de stocker module necessaires au boot car les modules sont dans le DD alors qu’on a pas le module pour monter</p>
<ul>
  <li>un initrd par noyau</li>
  <li>
    <table>
      <tbody>
        <tr>
          <td>son contenu: zcat /boot/initrd….</td>
          <td>cpio -id –no-absolute-filenames</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>execute le sciprt init à la racine pour charger modules nécessaires</li>
  <li>puis passe la main à /sbin/init</li>
</ul>

<h3 id="construire-initrd">construire initrd</h3>
<p>RH, SUSE: mkinitrd
Debian: mkinitramfs
on peut y ajouter des modules</p>

<p>maintenant
initramfs
conf: /etc/initramfs-tools
$ mkinitramfs -o /tmp/initrd-$(uname -r)</p>

<h1 id="fs-virtuel">FS virtuel</h1>
<p>/proc
/sys
FS virtuel avec info sur le système
avant proc tout seul
pas de place mémoire</p>

<h1 id="sysctl">sysctl</h1>
<p>systemd-sysctl appel sysctl
pour faire modif permanente dans /etc/sysctl.co,f ou .d
sysctl -a
net.ipv4.ip_forward=1</p>

<h1 id="compiler-un-noyau">Compiler un noyau</h1>
<p>noyau vanilla: brut
sources, configurer, compiler, installer
installer xz-utils
tar tvJf linux-…
source dans /usr/src/linux ou /usr/linux-sources-… ou /usr/src/kernels</p>

<h3 id="récupérer-les-sources">récupérer les sources</h3>
<p>D: linux-sources-x.y…
RH: kernel-sources</p>

<h3 id="config">config</h3>
<p>avec le .config
y: intégrer au noyau
m: compiler en module
n: fonctionnalité abscente</p>

<p>config des anciens noyaux dans /boot
peut le copier et le réutiliser pour le nouveau
ensuite make oldconfig + question pour màj</p>

<p>make menuconfig + interface avec choix et génére le .config
make xconfig: graphique</p>

<p>p416: optimisation en désactuvant modules</p>

<h3 id="compilation">compilation</h3>
<p>make -j 3
long</p>

<h3 id="installation-1">installation</h3>
<p>make modules_install # install modules dans /lib/modules/noyau
make install # recopie noyau dans /boot</p>

<p>si pas de initrd
cd /boot
mkinitramfs -o initrd.img-4.9…</p>

<p>si nouveau noyau non pris en compte:
grub-mkconfig -a /boot/grub/grub.cfg</p>

<p>make clean # supprimer fichiers objets</p>

<p>sous yum: make rpm pour créer packahe source, header, noyau</p>

<h3 id="les-fichiers-periph">les fichiers periph</h3>
<p>dans /dev
créer fichier spécial
mknod /dev/periph</p>

<h1 id="connaitre-son-matériel">Connaitre son matériel</h1>
<p>bus PCI: lspci
-v: details
-s: spécifier adaptateur
$ lspci -v -s 02:00.0</p>

<p>bus USB: lsusb
-d: info
-v: info</p>

<p>kwinfo –short, –cpu –memory
BIOS dmidecode -t processor</p>

<h1 id="udev-fs-dynamique-remplace-devfs">udev, fs dynamique, remplace devfs</h1>
<p>gere tout /dev
est composant de systemd
lancé comme service classique
noyau génère des events et udev les lit et les interpréte
régles dans /etc/udev/rules.d ou /lib/udev/rules.d</p>

<p>périph controlé par udev:
udevinfo –query=all -n /dev/sda
ou udevadm info –query=all -n /dev/sdb</p>

<hr />
<hr />

<h1 id="les-tâches-administratives">Les tâches administratives</h1>
<h1 id="administration-des-utilisateurs">Administration des utilisateurs</h1>
<p>identification: savoir qui est qui, pour connaitre les droits (login)
authentification: apporter preuve de qui on est (mdp)</p>

<p>utilisateur = login + UID + GID
les UID et GID sont dans tables de inodes
GID: groupe principal
UID &lt; 100: comptes spéciaux
UID de root = 0
UID &gt; 100, 500, 1000: user normal
/etc/login.defs</p>

<p>groupe primaire: utiliser pour créer les fichiers
$ id mourad</p>

<p>/etc/passwd: liste de user
login
password -&gt; x: /etc/shadow et !: compte vérouillé
UID:GID:comment:home directory:shell</p>

<p>/etc/group
nom:password:GID
liste des users dont c’est un groupe secondaire
mdp sur un groupe pour éviter de passer en groupe primaire avec newgrp</p>

<p>/etc/shadow
login
mdp $xx$: type de chiffrement
nb jours depuis 1 janvier 1960 du dernier changement de mdp
nb jours avant lesquels le mdp ne peut pas être changé (0: peut être changé n’importe quand)
nb jours après lesquels le mdp doit être changé
nb jours avant l’expiration du mdp durant lesquels l’utilisateur doit être prévenu
nb jours aprés experiration le compte est désactivé
nb jours depuis 70 desactivation
reservé</p>

<p>$1$: MD5
$2a$: Blowfish
$5: sha-256
$6: sha-512
autres: DES</p>

<p>man crypt</p>

<p>/etc/gshadow
c’est /etc/shadow pour les groupes
nom du groupe:mdp:admin du groupe:membres</p>

<h1 id="gestion-des-utilisateurs">Gestion des utilisateurs</h1>
<h3 id="ajout">ajout</h3>
<p>ajouter lignes dans
/etc/passwd
/etc/shadow
/etc/group
/etc/gshadow
copie de /etc/skel
changer droits de la copie
changer mdp</p>

<p>possible à la main, mettre à jour: vipw</p>

<p>$ useradd mourad
-m: créer home directory
-u: préciser UID
-g: préciser group principal
-G: groupe additionnels, séparés par virgule
-d: chemin home directory
-c: commentaire
-k: chemin vers le skel
-s: shell, avec chsh
-p: mdp chiffré, avec passwd</p>

<p>créer mdp
$ passwd mourad</p>
<h3 id="sécurité-des-mdp">sécurité des mdp</h3>
<p>passwd: gérer /etc/shadow
module PAM peut imposer contraintes sur le mdp
root peut changer sans contraintes</p>

<h3 id="gérer-info-de-validalité-du-mdp">gérer info de validalité du mdp</h3>
<p>passwd et chage
chage -l mourad: info</p>

<p>modif:
usermod, même option que useradd
-L: lock du compte
-U: unlock
-e <n>: mdp expire aprés n jours
-l: modifier login
-m: move home directory</n></p>

<p>$ chage mourad : intéractive pour changer les dates
$ chage -l mourad: info date pour user</p>

<h3 id="suppression">suppression</h3>
<p>userdel
-r: supprime home directory</p>

<h1 id="gestion-de-groupe">Gestion de groupe</h1>
<h3 id="ajout-1">ajout</h3>
<p>groupadd
-g: GID</p>

<h3 id="modif">modif</h3>
<p>groupmod
-n: renommer
-g: GID, le groupe d’appartenance des fichiers n’est pas modifié</p>

<h3 id="suppression-1">suppression</h3>
<p>groupdel
vérifier d’abord que ce n’est pas le groupe principale d’un user et ensuite supprimer
vérifier traces du groupe dans tout le système</p>

<h3 id="mdp">mdp</h3>
<p>gpasswd test
gpasswd -a seb test
ajouter seb dans groupe test</p>

<p>gpasswd -M seb,steph test # membres groupe
gpasswd -A admin test</p>

<h1 id="commandes-additionnelles">commandes additionnelles</h1>
<h3 id="conversion-des-fichiers">conversion des fichiers</h3>
<p>pour migration sur system qui ne supporte que passwd et non shadow
shadow + passwd -&gt; unique passwd
avec pwunconv (plus de durée de validité des mdp)
pwconv fait l’inverse
groupe: grpconv et grpunconv</p>

<h3 id="vérifier-la-cohérence">vérifier la cohérence</h3>
<p>pwck: vérification de passwd et shadow
grpck</p>

<h3 id="vérifier-les-connexions">vérifier les connexions</h3>
<p>lastlog
se base sur /var/log/lastlog
-u: user
-tn : des n derniers jours</p>

<p>last
se base sur /var/log/wtmp
ip, date co, date deco, durée co, status</p>

<h1 id="action-de-lutilisation">Action de l’utilisation</h1>
<p>chsh
-l: affiche /etc/shells
-s: /bin/sh</p>

<p>chfn: change commentaire</p>

<p>newgrp mon_groupe: change groupe principal temporairement qui doit être secondaire ou avoir mdp
newgrp seul: revenir en arrière</p>

<p>changer identité
su (substitute user)
su - seb: charger en + l’environnement
su -c “make install”
sg pour les groupes</p>

<p>intéroger système
getent: intérogger les systèmes en passant par ses biblio NSS(name server, switch sans passer pas fichiers locaux mais par LDAP, NIS, AD)
getent passwd
getent shadow
getent group
getent gshadow</p>

<p>configuration avancée
/etc/login.defs: utilisé par pas mal de commande pour des valeurs par d”faut ou régles</p>

<p>notification à l’utilisateur
/etc/issue: message d’accueil
/etc/issue.net: message d’accueil depuis ssh
/etc/motd: message of the day
wal, write et mesg
wall: pour tous les users
write: pr 1 utilisateur
mesg y/n; recevoir ou non les messages</p>

<h1 id="lenvironnement-utilisateur">l’environnement utilisateur</h1>
<p>/etc/skel (skeleton): copié dans les homes
/etc/profile: définit PATH, LOGNAME, USER, HOSTNAME HISTSIZE, MAIL, INPUTRC
/etc/profile.d/*
~/.bash_profile
~/.bashrc
/etc/bashrc</p>

<h1 id="apercu-de-pam">apercu de PAM</h1>
<p>pluggable authentification modules
ensemble de modules, biblio, pour mettre en place des systèmes d’authentification avancés
unix classique, LDAP, AD</p>

<h1 id="limpression">l’impression</h1>
<h3 id="principe">principe</h3>
<p>3 standards sous Unix, sous sytem V, sous BSD
imprimantes dans /etc/printcap avec file d’attente (queue)
pour imprimer documents formatés ou images, il faut (pilotes) filtres d’impression entre le doc et la communication
prendre imprimante compatible avec Postscript</p>

<p>system V: lp
BSD: lpr</p>

<p>CUPS: commun unix printing system
système d’impression Unix orienté réseau, IPP avec HTTP
cupsd localhost:631
/etc/cups/cupsd.conf</p>

<h1 id="automatisation">Automatisation</h1>
<h3 id="avec-cron">avec cron</h3>
<p>avec crontab
crontab -e: editer tab perso
sont dans /var/spool/cron/*
service cron doit tourner
min heure jour_du_mois mois jour_semaine cmd
15 ou 15,16,20 ou 15-30 ou *
0: lundi
*/5: toutes les 5 min
2-57/5: 2,7,12,…
crontab -l: crontabs actives
crontab -r: supprimer
crontab -u user: editer</p>

<p>crontab système + utilisateur
/etc/crontab
on peut préciser var. d’environnement
run-parts: prend en param un repertoire et exécute tous les programmes qui sont à l’intérieur
logrotate: effectue sauvegarde et renomme fichiers de logs et journaux
tmpwatch: chargé de nettoyer le sys de fichiers inutilisé (/tmp)
/etc/crond.d/ au système</p>

<p>contrôle d’accés
/etc/cron.allow
/etc/cron.deny</p>

<h3 id="avec-at">avec at</h3>
<p>atd (at deamon)
modif vilatiles
at 21:20: donner commandes et EOL
at -f /home/seb/test.sh  21:25
heure: hhmm ou hh:mm
MMJJAA ou xx/xx/xx
…</p>

<p>batch: execute lorsque la charge de la machine est basse
atq (at queue): tâche programmés
/var/spool/atjobs: 1 executable par tâche
atrm 10: supprimer un job</p>

<p>contrôle d’accés
/etc/at.allow
/etc/at.deny</p>

<h3 id="avec-anacron">avec anacron</h3>
<p>/etc/anacrontab
anacron peut remplacer cron sur machine souvent éteinte
cmd exécuté dés que la période est atteinte ou dépassée
execution périodique
periode delai identifiant cmd
7 10 cron.weekly nice runparts –report /etc/cron.weekly
tous les 7 jours, 10 min après le lancement</p>

<h1 id="les-traces-logs-du-sytème">Les traces (logs) du sytème</h1>
<h3 id="principe-1">principe</h3>
<p>services spécialisés dans la réception de message pour les logs
klogd: kernel log deamon, emis par kernel
syslogd: sys log deamon, emis par services (+ un peu kernel)
journald: composant de systemd, tout service
(syslog-ng ou rsyslog)</p>

<p>klogd
gére logs emis par noyau</p>
<ul>
  <li>2 src d’accés: /proc (/proc/kmsg): s’il est présent,</li>
  <li>appels système via API (sys_syslog) si /proc est absent, ou explicite</li>
</ul>

<p>message noyau avec niveaux
0: EMERG: sys inutilisable
1: ALERT: action doit être prise immédiatement
2: CRIT: prob. critique
3: ERR: erreur
4: WARNING: avertissement
5: NOTICE: normal mais nécessite attention particulière
6: INFO: info standard
7: DEBUG: trace debug noyau</p>

<p>klogd: envoi 0-6 à syslogd
7: ne sont pas tracés par défaut</p>

<h3 id="configuration-syslog">configuration syslog</h3>
<p>/etc/syslog.conf
permet de définir l’origine, l’importance et la dest de chaque message, sous forme de 2 champs
l’origine:
auth,authpriv: secu et authentification
cron: service cron
deamon: demons sys
kern: noyau
lpr: service d’impression
mail: messagerie
news: le réseau
syslog: syslog lui-même
user: message des process utilisateurs
uucp: Unix to Unix CoPy
local 0-&gt;7: issus de klogd</p>

<p>l’importance
emerg
alert
crit
err
warning
notice
info
debug
none: ignorer les mess</p>

<p>la destination
fichier</p>

<p>envoyer message à syslogd avec “logger”</p>

<h3 id="cas-de-rsyslog">cas de rsyslog</h3>
<p>/etc/rsyslog.conf</p>

<h3 id="systemd-et-journal">systemd et journal</h3>
<p>journal démarré par systemd
avec des avantages
stocké en binaire dans /run/log/journal
le FS /run est volatile, vidé à chaque redémarrage, on des places vers /var
mkdir /var/log/journal
systemd-tmpfils –create –prefix /var/log/journal
systemctl restart systemd-journald
commande journalctl pourexploitation
/etc/systemd/journal.conf
options: p486</p>

<h3 id="les-fichiers-de-traces">les fichiers de traces</h3>
<p>/var/log</p>

<h3 id="journalctl-1">journalctl</h3>
<p>accéder aux traces stockés par journalctl
journalctl -f: tail -f
journalctl _SYSTEMD_UNIT=ssh.service
ajouter option à la fin
since: -S “2017-01-29 09:00:00”
until: -U “2017-01-29 09:00:00”</p>

<p>-o: modifier format de sortie</p>

<h1 id="archivage-et-backup">Archivage et backup</h1>
<h3 id="les-outils-de-sauvegarde">les outils de sauvegarde</h3>
<p>tar: fichier et arborescences (ou cpio)
dd (dump): sauv physqiue de disque ou de FS
sauv incrémentale (première grosse et des petites)
autre solution Networker
plan de sauvegarde
les trucs à protéger ?</p>

<h3 id="autres-commandes">autres commandes</h3>
<p>mt: contrôle d’une bande magnétique
touch: màj date de last modif pour forcer sauv. incrémental
find: selectionner fichiers à sauv
compress et uncompress des fichiers
gzip, gunzip, zcat
xz, unxy, xzcat</p>

<h3 id="tar">tar</h3>
<p>simple et efficace
pour créer archives
tar cvf desktop.tar Desktop/
-c: créer archive
-v: verbeu
-f: nom archive</p>

<p>lister:
tab tcf desktop.tar</p>

<p>resauration
tar xvf desktop.tar
-x: extraction</p>

<p>autres param
compression:
-z: gzip
-Z: compress
-j: bzip2
-J: xy</p>

<p>tar cvzf desktop.tar.gz Desktop/</p>

<h3 id="cpio">cpio</h3>
<p>sauvergarde sur la sortie standard
les fichiers de sont entré standard (redirection)
ne compress pas les archives
cpio -oL
-o: output, création de la sauv en sortie
-L: sauvegarder les fichiers et pas les liens s.
-v: verbose
-c: sauvegarder des attributs des fichiers ss-forme ASCII
find Desktop -rpint | cpio -ocv | gzip &gt; archive.cpio.gz</p>

<p>lister
cpio -it archive
-i: lecture de l’archive en entrée
-t: lister contenu
cat archive.cpio.gz | gzip -cd | cpio -it
restaurer
prec + | cpio -iuvd</p>

<h3 id="dd">dd</h3>
<p>device to device
copie physique, bloc par bloc d’un fichier periph vers un autre
créer fichier vide de 1Mo
dd if=/dev/zero of=vide les=446 count=1024
count: nb blocs à copier</p>

<h3 id="lhorloge">l’horloge</h3>
<p>connaitre l’heure
date
strftime en C
date avec pleins d’options</p>

<h3 id="ntp">NTP</h3>
<p>network time protocol
synchro de horloges</p>

<h1 id="les-param-régionaux">les param régionaux</h1>
<p>dpkg-reconfigure locales
LANG
D,U: /etc/default/locale
RH: /etc/locale.conf
SuSE: /etc/sysconfig/language</p>

<p>LANG=fr_FR.UTF-8
langue_Pays[.norme][@variante]</p>

<p>export LANG=en_US.UTF-8</p>

<p>supporté par système:
locale -a
/usr/share/locale
toutes les variables LC implique format mais LANG les surclasses</p>

<h3 id="fuseaux-horaire-timezone">fuseaux horaire, timezone</h3>
<p>D,U: dpkg-reconfigure tzdata ou timedatectl
RH7: timedatectl
RH6: system-config-date, redhat-config-date
autres: timedatctl</p>

<p>/etc/timezone continent/ville
/etc/localtime binaire,info sur timezone
avec decalage + changement d’heures</p>

<p>les fichiers de conf des timezones
/usr/share/zoneinfo
/usr/share/zoneinfo/Europe/Paris
lins s. de /et/localtime lors de config
echo $T2</p>

<p>codage des caractères
unicode pour tout simplifier
unicode UTF-8
iconv -f WINDOWS-1252 -t UTF8 nom_fichier</p>

<h1 id="acl">ACL</h1>
<p>Be able to add a right system to classic POSIX system (owner, group, other).</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>setfacl <span class="nt">-m</span> u:mourad:rx ./mon_fichier
<span class="nv">$ </span>setfacl <span class="nt">-m</span> g:grp_admin:rwx ./mon_fichier

<span class="nv">$ </span>setfacl <span class="nt">-bm</span> u:mourad:rx ./mon_fichier <span class="c"># default</span>
<span class="nv">$ </span>setfacl <span class="nt">-Rbm</span> u:mourad:rx ./mon_fichier <span class="c"># reccursive</span>

<span class="nv">$ </span>getfacl ./mon_fichier

setfact <span class="nt">-b</span> <span class="c"># delete all permission</span>
setfact <span class="nt">-k</span> <span class="c"># delete just default permission</span>
setfact <span class="nt">-x</span> u:mourad:rx <span class="c"># delete particular line</span>
</code></pre></div></div>

<h1 id="colors">Colors</h1>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">NC</span><span class="o">=</span><span class="s1">'\033[0m'</span> <span class="c"># Aucune couleur</span>
<span class="nv">Red</span><span class="o">=</span><span class="s1">'\033[0;31m'</span>
<span class="nv">Green</span><span class="o">=</span><span class="s1">'\033[0;32m'</span>
<span class="nv">Yellow</span><span class="o">=</span><span class="s1">'\033[0;33m'</span>
<span class="nv">LINE</span><span class="o">=</span><span class="s2">"____________________________________________________________"</span>

<span class="k">if</span> <span class="o">[</span> <span class="o">!</span> <span class="nt">-f</span> /home/test.txt <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
 <span class="c">#touch /home/test.txt</span>
 <span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> <span class="nt">-eq</span> 0 <span class="o">]</span><span class="p">;</span> <span class="k">then
     </span><span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="k">${</span><span class="nv">LINE</span><span class="k">}</span><span class="s2"> [</span><span class="k">${</span><span class="nv">Green</span><span class="k">}</span><span class="s2"> OK </span><span class="k">${</span><span class="nv">NC</span><span class="k">}</span><span class="s2">]</span><span class="se">\r</span><span class="s2">Creating /home/test.txt "</span>
 <span class="k">else
     </span><span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="k">${</span><span class="nv">LINE</span><span class="k">}</span><span class="s2"> [</span><span class="k">${</span><span class="nv">Red</span><span class="k">}</span><span class="s2"> FAIL </span><span class="k">${</span><span class="nv">NC</span><span class="k">}</span><span class="s2">]</span><span class="se">\r</span><span class="s2">Creating /home/test.txt "</span>
 <span class="k">fi
else
   </span><span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="k">${</span><span class="nv">LINE</span><span class="k">}</span><span class="s2"> [</span><span class="k">${</span><span class="nv">Yellow</span><span class="k">}</span><span class="s2"> ALREADY EXISTS </span><span class="k">${</span><span class="nv">NC</span><span class="k">}</span><span class="s2">]</span><span class="se">\r</span><span class="s2">Creating /home/test.txt "</span>
<span class="k">fi</span>
</code></pre></div></div>

<h1 id="userdel">Userdel</h1>
<!--more-->
<p>On veut supprimer l’utilisateur jean</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># lock account</span>
passwd <span class="nt">-l</span> jean

<span class="c"># backup</span>
<span class="nb">tar</span> <span class="nt">-zcvf</span> /var/backup/account/deleted/j/jean.<span class="nv">$uid</span>.<span class="nv">$now</span>.tar.gz /home/jean/

<span class="c"># running process</span>
ps <span class="nt">-fp</span> <span class="k">$(</span>pgrep <span class="nt">-u</span> jean<span class="k">)</span>
killall <span class="nt">-KILL</span> <span class="nt">-u</span> jean

<span class="c"># delete jobs</span>
find /var/spool/at/ <span class="nt">-name</span> <span class="s2">"[^.]*"</span> <span class="nt">-type</span> f <span class="nt">-user</span> jean <span class="nt">-delete</span>

<span class="c"># delete cron jobs</span>
crontab <span class="nt">-r</span> <span class="nt">-u</span> jean

<span class="c"># remove printf jobs</span>
lprm jean

<span class="c"># find all files</span>
find / <span class="nt">-user</span> jean <span class="nt">-exec</span> <span class="nb">chown </span>newUserName:newGroupName <span class="o">{}</span> <span class="se">\;</span>

<span class="c"># finally delete user</span>
userdel <span class="nt">-r</span> jean
</code></pre></div></div>

<h1 id="cron">cron</h1>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># éditer la crontab</span>
<span class="nv">$ </span>crontab <span class="nt">-e</span>

<span class="c"># afficher le contenu</span>
<span class="nv">$ </span>crontab <span class="nt">-l</span>
</code></pre></div></div>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Example of job definition:</span>
<span class="c"># .---------------- minute (0 - 59)</span>
<span class="c"># |  .------------- hour (0 - 23)</span>
<span class="c"># |  |  .---------- day of month (1 - 31)</span>
<span class="c"># |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span>
<span class="c"># |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span>
<span class="c"># |  |  |  |  |</span>
<span class="c"># *  *  *  *  *  user command to be executed</span>

</code></pre></div></div>

</div>


<div class="related">
  <h2>Related posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/linux/2019/12/23/ctf-santhacklaus/">
            santhacklaus ctf v2
            <small>23 Dec 2019</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/ctf/2019/12/05/sigsegv2/">
            sigsegv2
            <small>05 Dec 2019</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/ctf/2019/07/29/linux/">
            linux
            <small>29 Jul 2019</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>


      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script src='/public/js/script.js'></script>
  </body>
</html>
